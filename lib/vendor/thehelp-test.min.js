/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */

/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */

/*!
 * Primary Exports
 */

/*!
 * Inherit from Error.prototype
 */

/*!
 * Statically set name
 */

/*!
 * Ensure correct constructor
 */

/*!
 * type-detect
 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Detectable javascript natives
 */

/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Module dependencies
 */

/*!
 * Buffer.isBuffer browser shim
 */

/*!
 * Primary Export
 */

/*!
 * Strict (egal) equality test. Ensures that NaN always
 * equals NaN and `-0` does not equal `+0`.
 *
 * @param {Mixed} a
 * @param {Mixed} b
 * @return {Boolean} equal match
 */

/*!
 * Compare the types of two given objects and
 * return if they are equal. Note that an Array
 * has a type of `array` (not `object`) and arguments
 * have a type of `arguments` (not `array`/`object`).
 *
 * @param {Mixed} a
 * @param {Mixed} b
 * @return {Boolean} result
 */

/*!
 * Compare two Date objects by asserting that
 * the time values are equal using `saveValue`.
 *
 * @param {Date} a
 * @param {Date} b
 * @return {Boolean} result
 */

/*!
 * Compare two regular expressions by converting them
 * to string and checking for `sameValue`.
 *
 * @param {RegExp} a
 * @param {RegExp} b
 * @return {Boolean} result
 */

/*!
 * Assert deep equality of two `arguments` objects.
 * Unfortunately, these must be sliced to arrays
 * prior to test to ensure no bad behavior.
 *
 * @param {Arguments} a
 * @param {Arguments} b
 * @param {Array} memoize (optional)
 * @return {Boolean} result
 */

/*!
 * Get enumerable properties of a given object.
 *
 * @param {Object} a
 * @return {Array} property names
 */

/*!
 * Simple equality for flat iterable objects
 * such as Arrays or Node.js buffers.
 *
 * @param {Iterable} a
 * @param {Iterable} b
 * @return {Boolean} result
 */

/*!
 * Extension to `iterableEqual` specifically
 * for Node.js Buffers.
 *
 * @param {Buffer} a
 * @param {Mixed} b
 * @return {Boolean} result
 */

/*!
 * Block for `objectEqual` ensuring non-existing
 * values don't get in.
 *
 * @param {Mixed} object
 * @return {Boolean} result
 */

/*!
 * Recursively check the equality of two objects.
 * Once basic sameness has been established it will
 * defer to `deepEqual` for each enumerable key
 * in the object.
 *
 * @param {Mixed} a
 * @param {Mixed} b
 * @return {Boolean} result
 */

/*!
 * chai
 * Copyright(c) 2011-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai version
 */

/*!
 * Assertion Error
 */

/*!
 * Utils for plugins (not exported)
 */

/*!
 * Primary `Assertion` prototype
 */

/*!
 * Core Assertions
 */

/*!
 * Expect interface
 */

/*!
 * Should interface
 */

/*!
 * Assert interface
 */

/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
   * Module dependencies.
   */

/*!
   * Module export.
   */

/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * @api private
   */

/*!
    * ### Assertion.includeStack
    *
    * User configurable property, influences whether stack trace
    * is included in Assertion error message. Default of false
    * suppresses stack trace in the error message
    *
    *     Assertion.includeStack = true;  // enable stack on error
    *
    * @api public
    */

/*!
   * ### Assertion.showDiff
   *
   * User configurable property, influences whether or not
   * the `showDiff` flag should be included in the thrown
   * AssertionErrors. `false` will always be `false`; `true`
   * will be true when the assertion has requested a diff
   * be shown.
   *
   * @api public
   */

/*!
   * ### .assert(expression, message, negateMessage, expected, actual)
   *
   * Executes an expression and check expectations. Throws AssertionError for reporting if test doesn't pass.
   *
   * @name assert
   * @param {Philosophical} expression to be tested
   * @param {String} message to display if fails
   * @param {String} negatedMessage to display if negated expression fails
   * @param {Mixed} expected value (remember to check for negation)
   * @param {Mixed} actual (optional) will default to `this.obj`
   * @api private
   */

/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */

/*!
   * Chai dependencies.
   */

/*!
   * Undocumented / untested
   */

/*!
   * Aliases.
   */

/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Module variables
 */

/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - flag utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Module dependancies
 */

/*!
 * Chai - getName utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - getPathValue utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * @see https://github.com/logicalparadox/filtr
 * MIT Licensed
 */

/*!
 * ## parsePath(path)
 *
 * Helper function used to parse string object
 * paths. Use in conjunction with `_getPathValue`.
 *
 *      var parsed = parsePath('myobject.property.subprop');
 *
 * ### Paths:
 *
 * * Can be as near infinitely deep and nested
 * * Arrays are also valid using the formal `myobject.document[3].property`.
 *
 * @param {String} path
 * @returns {Object} parsed
 * @api private
 */

/*!
 * ## _getPathValue(parsed, obj)
 *
 * Helper companion function for `.parsePath` that returns
 * the value located at the parsed address.
 *
 *      var value = getPathValue(parsed, obj);
 *
 * @param {Object} parsed definition from `parsePath`.
 * @param {Object} object to search against
 * @returns {Object|Undefined} value
 * @api private
 */

/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Main exports
 */

/*!
 * test utility
 */

/*!
 * type utility
 */

/*!
 * message utility
 */

/*!
 * actual utility
 */

/*!
 * Inspect util
 */

/*!
 * Object Display util
 */

/*!
 * Flag utility
 */

/*!
 * Flag transferring utility
 */

/*!
 * Deep equal utility
 */

/*!
 * Deep path value
 */

/*!
 * Function name
 */

/*!
 * add Property
 */

/*!
 * add Method
 */

/*!
 * overwrite Property
 */

/*!
 * overwrite Method
 */

/*!
 * Add a chainable method
 */

/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - test utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Chai - type utility
 * Copyright(c) 2012-2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/**
 * Sinon.JS 1.7.3, 2013/11/11
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @author Contributors: https://github.com/cjohansen/Sinon.JS/blob/master/AUTHORS
 *
 * (The BSD License)
 * 
 * Copyright (c) 2010-2013, Christian Johansen, christian@cjohansen.no
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 *     * Redistributions of source code must retain the above copyright notice,
 *       this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright notice,
 *       this list of conditions and the following disclaimer in the documentation
 *       and/or other materials provided with the distribution.
 *     * Neither the name of Christian Johansen nor the names of his contributors
 *       may be used to endorse or promote products derived from this software
 *       without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * Sinon core utilities. For internal use only.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Match functions
 *
 * @author Maximilian Antoni (mail@maxantoni.de)
 * @license BSD
 *
 * Copyright (c) 2012 Maximilian Antoni
 */

/**
  * Spy calls
  *
  * @author Christian Johansen (christian@cjohansen.no)
  * @author Maximilian Antoni (mail@maxantoni.de)
  * @license BSD
  *
  * Copyright (c) 2010-2013 Christian Johansen
  * Copyright (c) 2013 Maximilian Antoni
  */

/**
  * Spy functions
  *
  * @author Christian Johansen (christian@cjohansen.no)
  * @license BSD
  *
  * Copyright (c) 2010-2013 Christian Johansen
  */

/**
 * Stub functions
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Mock functions.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Collections of stubs, spies and mocks.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Fake timer API
 * setTimeout
 * setInterval
 * clearTimeout
 * clearInterval
 * tick
 * reset
 * Date
 *
 * Inspired by jsUnitMockTimeOut from JsUnit
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Minimal Event interface implementation
 *
 * Original implementation by Sven Fuchs: https://gist.github.com/995028
 * Modifications and tests by Christian Johansen.
 *
 * @author Sven Fuchs (svenfuchs@artweb-design.de)
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2011 Sven Fuchs, Christian Johansen
 */

/**
 * Fake XMLHttpRequest object
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * The Sinon "server" mimics a web server that receives requests from
 * sinon.FakeXMLHttpRequest and provides an API to respond to those requests,
 * both synchronously and asynchronously. To respond synchronuously, canned
 * answers have to be provided upfront.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Add-on for sinon.fakeServer that automatically handles a fake timer along with
 * the FakeXMLHttpRequest. The direct inspiration for this add-on is jQuery
 * 1.3.x, which does not use xhr object's onreadystatehandler at all - instead,
 * it polls the object for completion with setInterval. Dispite the direct
 * motivation, there is nothing jQuery-specific in this file, so it can be used
 * in any environment where the ajax implementation depends on setInterval or
 * setTimeout.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Manages fake collections as well as fake utilities such as Sinon's
 * timers and fake XHR implementation in one convenient object.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Test function, sandboxes fakes
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Test case, sandboxes all test functions
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Assertions matching the test spy retrieval interface.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/*!
 * mocha
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */

(function(){function require(e,t,n){var r=require.resolve(e);if(null==r){n=n||e,t=t||"root";var i=new Error('Failed to require "'+n+'" from "'+t+'"');throw i.path=n,i.parent=t,i.require=!0,i}var s=require.modules[r];if(!s._resolving&&!s.exports){var o={};o.exports={},o.client=o.component=!0,s._resolving=!0,s.call(this,o.exports,require.relative(r),o),delete s._resolving,s.exports=o.exports}return s.exports}require.modules={},require.aliases={},require.resolve=function(e){e.charAt(0)==="/"&&(e=e.slice(1));var t=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"];for(var n=0;n<t.length;n++){var e=t[n];if(require.modules.hasOwnProperty(e))return e;if(require.aliases.hasOwnProperty(e))return require.aliases[e]}},require.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var r=0;r<t.length;++r)".."==t[r]?e.pop():"."!=t[r]&&""!=t[r]&&n.push(t[r]);return e.concat(n).join("/")},require.register=function(e,t){require.modules[e]=t},require.alias=function(e,t){if(!require.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');require.aliases[t]=e},require.relative=function(e){function n(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function r(t){var n=r.resolve(t);return require(n,e,t)}var t=require.normalize(e,"..");return r.resolve=function(r){var i=r.charAt(0);if("/"==i)return r.slice(1);if("."==i)return require.normalize(t,r);var s=e.split("/"),o=n(s,"deps")+1;return o||(o=0),r=s.slice(0,o+1).join("/")+"/deps/"+r,r},r.exists=function(e){return require.modules.hasOwnProperty(r.resolve(e))},r},require.register("chaijs-assertion-error/index.js",function(e,t,n){function r(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){var n=[].slice.call(arguments),r=0,i={};for(;r<n.length;r++)t(i,n[r]);return i}}function i(e,t,n){var i=r("name","message","stack","constructor","toJSON"),s=i(t||{});this.message=e||"Unspecified AssertionError",this.showDiff=!1;for(var o in s)this[o]=s[o];n=n||arguments.callee,n&&Error.captureStackTrace&&Error.captureStackTrace(this,n)}n.exports=i,i.prototype=Object.create(Error.prototype),i.prototype.name="AssertionError",i.prototype.constructor=i,i.prototype.toJSON=function(e){var t=r("constructor","toJSON","stack"),n=t({name:this.name},this);return!1!==e&&this.stack&&(n.stack=this.stack),n}}),require.register("chaijs-type-detect/lib/type.js",function(e,t,n){function i(e){var t=Object.prototype.toString.call(e);return r[t]?r[t]:e===null?"null":e===undefined?"undefined":e===Object(e)?"object":typeof e}function s(){this.tests={}}var e=n.exports=i,r={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};e.Library=s,s.prototype.of=i,s.prototype.define=function(e,t){return arguments.length===1?this.tests[e]:(this.tests[e]=t,this)},s.prototype.test=function(e,t){if(t===i(e))return!0;var n=this.tests[t];if(n&&"regexp"===i(n))return n.test(e);if(n&&"function"===i(n))return n(e);throw new ReferenceError('Type test "'+t+'" not defined or invalid.')}}),require.register("chaijs-deep-eql/lib/eql.js",function(e,t,n){function o(e,t,n){return u(e,t)?!0:"date"===r(e)?f(e,t):"regexp"===r(e)?l(e,t):i.isBuffer(e)?d(e,t):"arguments"===r(e)?c(e,t,n):a(e,t)?"object"!==r(e)&&"object"!==r(t)&&"array"!==r(e)&&"array"!==r(t)?u(e,t):m(e,t,n):!1}function u(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function a(e,t){return r(e)===r(t)}function f(e,t){return"date"!==r(t)?!1:u(e.getTime(),t.getTime())}function l(e,t){return"regexp"!==r(t)?!1:u(e.toString(),t.toString())}function c(e,t,n){return"arguments"!==r(t)?!1:(e=[].slice.call(e),t=[].slice.call(t),o(e,t,n))}function h(e){var t=[];for(var n in e)t.push(n);return t}function p(e,t){if(e.length!==t.length)return!1;var n=0,r=!0;for(;n<e.length;n++)if(e[n]!==t[n]){r=!1;break}return r}function d(e,t){return i.isBuffer(t)?p(e,t):!1}function v(e){return e!==null&&e!==undefined}function m(e,t,n){if(!v(e)||!v(t))return!1;if(e.prototype!==t.prototype)return!1;var r;if(n){for(r=0;r<n.length;r++)if(n[r][0]===e&&n[r][1]===t||n[r][0]===t&&n[r][1]===e)return!0}else n=[];try{var i=h(e),s=h(t)}catch(u){return!1}i.sort(),s.sort();if(!p(i,s))return!1;n.push([e,t]);var a;for(r=i.length-1;r>=0;r--){a=i[r];if(!o(e[a],t[a],n))return!1}return!0}var r=t("type-detect"),i;try{i=t("buffer").Buffer}catch(s){i={},i.isBuffer=function(){return!1}}n.exports=o}),require.register("chai/index.js",function(e,t,n){n.exports=t("./lib/chai")}),require.register("chai/lib/chai.js",function(e,t,n){var r=[],e=n.exports={};e.version="1.8.1",e.AssertionError=t("assertion-error");var i=t("./chai/utils");e.use=function(e){return~r.indexOf(e)||(e(this,i),r.push(e)),this};var s=t("./chai/assertion");e.use(s);var o=t("./chai/core/assertions");e.use(o);var u=t("./chai/interface/expect");e.use(u);var a=t("./chai/interface/should");e.use(a);var f=t("./chai/interface/assert");e.use(f)}),require.register("chai/lib/chai/assertion.js",function(e,t,n){n.exports=function(e,t){function i(e,t,n){r(this,"ssfi",n||arguments.callee),r(this,"object",e),r(this,"message",t)}var n=e.AssertionError,r=t.flag;e.Assertion=i,i.includeStack=!1,i.showDiff=!0,i.addProperty=function(e,n){t.addProperty(this.prototype,e,n)},i.addMethod=function(e,n){t.addMethod(this.prototype,e,n)},i.addChainableMethod=function(e,n,r){t.addChainableMethod(this.prototype,e,n,r)},i.overwriteProperty=function(e,n){t.overwriteProperty(this.prototype,e,n)},i.overwriteMethod=function(e,n){t.overwriteMethod(this.prototype,e,n)},i.prototype.assert=function(e,s,o,u,a,f){var l=t.test(this,arguments);!0!==f&&(f=!1),!0!==i.showDiff&&(f=!1);if(!l){var s=t.getMessage(this,arguments),c=t.getActual(this,arguments);throw new n(s,{actual:c,expected:u,showDiff:f},i.includeStack?this.assert:r(this,"ssfi"))}},Object.defineProperty(i.prototype,"_obj",{get:function(){return r(this,"object")},set:function(e){r(this,"object",e)}})}}),require.register("chai/lib/chai/core/assertions.js",function(e,t,n){n.exports=function(e,t){function s(e,n){n&&i(this,"message",n),e=e.toLowerCase();var r=i(this,"object"),s=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(r),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e)}function o(){i(this,"contains",!0)}function u(e,n){n&&i(this,"message",n);var r=i(this,"object");this.assert(~r.indexOf(e),"expected #{this} to include "+t.inspect(e),"expected #{this} to not include "+t.inspect(e))}function a(){var e=i(this,"object"),t=Object.prototype.toString.call(e);this.assert("[object Arguments]"===t,"expected #{this} to be arguments but got "+t,"expected #{this} to not be arguments")}function f(e,t){t&&i(this,"message",t);var n=i(this,"object");if(i(this,"deep"))return this.eql(e);this.assert(e===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function l(e,n){n&&i(this,"message",n),this.assert(t.eql(e,i(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function c(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s>e,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",e,s)}else this.assert(r>e,"expected #{this} to be above "+e,"expected #{this} to be at most "+e)}function h(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s>=e,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",e,s)}else this.assert(r>=e,"expected #{this} to be at least "+e,"expected #{this} to be below "+e)}function p(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s<e,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",e,s)}else this.assert(r<e,"expected #{this} to be below "+e,"expected #{this} to be at least "+e)}function d(e,t){t&&i(this,"message",t);var r=i(this,"object");if(i(this,"doLength")){(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s<=e,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",e,s)}else this.assert(r<=e,"expected #{this} to be at most "+e,"expected #{this} to be above "+e)}function v(e,n){n&&i(this,"message",n);var r=t.getName(e);this.assert(i(this,"object")instanceof e,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function m(e,n){n&&i(this,"message",n);var r=i(this,"object");this.assert(r.hasOwnProperty(e),"expected #{this} to have own property "+t.inspect(e),"expected #{this} to not have own property "+t.inspect(e))}function g(){i(this,"doLength",!0)}function y(e,t){t&&i(this,"message",t);var r=i(this,"object");(new n(r,t)).to.have.property("length");var s=r.length;this.assert(s==e,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",e,s)}function b(e){var n=i(this,"object"),r,s=!0;e=e instanceof Array?e:Array.prototype.slice.call(arguments);if(!e.length)throw new Error("keys required");var o=Object.keys(n),u=e.length;s=e.every(function(e){return~o.indexOf(e)}),!i(this,"negate")&&!i(this,"contains")&&(s=s&&e.length==o.length);if(u>1){e=e.map(function(e){return t.inspect(e)});var a=e.pop();r=e.join(", ")+", and "+a}else r=t.inspect(e[0]);r=(u>1?"keys ":"key ")+r,r=(i(this,"contains")?"contain ":"have ")+r,this.assert(s,"expected #{this} to "+r,"expected #{this} to not "+r)}function w(e,r,s){s&&i(this,"message",s);var o=i(this,"object");(new n(o,s)).is.a("function");var u=!1,a=null,f=null,l=null;arguments.length===0?(r=null,e=null):e&&(e instanceof RegExp||"string"==typeof e)?(r=e,e=null):e&&e instanceof Error?(a=e,e=null,r=null):typeof e=="function"?f=(new e).name:e=null;try{o()}catch(c){if(a)return this.assert(c===a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",a,c),this;if(e){this.assert(c instanceof e,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",f,c);if(!r)return this}var h="object"===t.type(c)&&"message"in c?c.message:""+c;if(h!=null&&r&&r instanceof RegExp)return this.assert(r.exec(h),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",r,h),this;if(h!=null&&r&&"string"==typeof r)return this.assert(~h.indexOf(r),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",r,h),this;u=!0,l=c}var p="",d=f!==null?f:a?"#{exp}":"an error";u&&(p=" but #{act} was thrown"),this.assert(u===!0,"expected #{this} to throw "+d+p,"expected #{this} to not throw "+d+p,a,l)}function E(e,t){return e.every(function(e){return t.indexOf(e)!==-1})}var n=e.Assertion,r=Object.prototype.toString,i=t.flag;["to","be","been","is","and","have","with","that","at","of","same"].forEach(function(e){n.addProperty(e,function(){return this})}),n.addProperty("not",function(){i(this,"negate",!0)}),n.addProperty("deep",function(){i(this,"deep",!0)}),n.addChainableMethod("an",s),n.addChainableMethod("a",s),n.addChainableMethod("include",u,o),n.addChainableMethod("contain",u,o),n.addProperty("ok",function(){this.assert(i(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),n.addProperty("true",function(){this.assert(!0===i(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),n.addProperty("false",function(){this.assert(!1===i(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),n.addProperty("null",function(){this.assert(null===i(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),n.addProperty("undefined",function(){this.assert(undefined===i(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),n.addProperty("exist",function(){this.assert(null!=i(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),n.addProperty("empty",function(){var e=i(this,"object"),t=e;Array.isArray(e)||"string"==typeof object?t=e.length:typeof e=="object"&&(t=Object.keys(e).length),this.assert(!t,"expected #{this} to be empty","expected #{this} not to be empty")}),n.addProperty("arguments",a),n.addProperty("Arguments",a),n.addMethod("equal",f),n.addMethod("equals",f),n.addMethod("eq",f),n.addMethod("eql",l),n.addMethod("eqls",l),n.addMethod("above",c),n.addMethod("gt",c),n.addMethod("greaterThan",c),n.addMethod("least",h),n.addMethod("gte",h),n.addMethod("below",p),n.addMethod("lt",p),n.addMethod("lessThan",p),n.addMethod("most",d),n.addMethod("lte",d),n.addMethod("within",function(e,t,r){r&&i(this,"message",r);var s=i(this,"object"),o=e+".."+t;if(i(this,"doLength")){(new n(s,r)).to.have.property("length");var u=s.length;this.assert(u>=e&&u<=t,"expected #{this} to have a length within "+o,"expected #{this} to not have a length within "+o)}else this.assert(s>=e&&s<=t,"expected #{this} to be within "+o,"expected #{this} to not be within "+o)}),n.addMethod("instanceof",v),n.addMethod("instanceOf",v),n.addMethod("property",function(e,n,r){r&&i(this,"message",r);var s=i(this,"deep")?"deep property ":"property ",o=i(this,"negate"),u=i(this,"object"),a=i(this,"deep")?t.getPathValue(e,u):u[e];if(o&&undefined!==n){if(undefined===a)throw r=r!=null?r+": ":"",new Error(r+t.inspect(u)+" has no "+s+t.inspect(e))}else this.assert(undefined!==a,"expected #{this} to have a "+s+t.inspect(e),"expected #{this} to not have "+s+t.inspect(e));undefined!==n&&this.assert(n===a,"expected #{this} to have a "+s+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have a "+s+t.inspect(e)+" of #{act}",n,a),i(this,"object",a)}),n.addMethod("ownProperty",m),n.addMethod("haveOwnProperty",m),n.addChainableMethod("length",y,g),n.addMethod("lengthOf",y,g),n.addMethod("match",function(e,t){t&&i(this,"message",t);var n=i(this,"object");this.assert(e.exec(n),"expected #{this} to match "+e,"expected #{this} not to match "+e)}),n.addMethod("string",function(e,r){r&&i(this,"message",r);var s=i(this,"object");(new n(s,r)).is.a("string"),this.assert(~s.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))}),n.addMethod("keys",b),n.addMethod("key",b),n.addMethod("throw",w),n.addMethod("throws",w),n.addMethod("Throw",w),n.addMethod("respondTo",function(e,n){n&&i(this,"message",n);var r=i(this,"object"),s=i(this,"itself"),o="function"===t.type(r)&&!s?r.prototype[e]:r[e];this.assert("function"==typeof o,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}),n.addProperty("itself",function(){i(this,"itself",!0)}),n.addMethod("satisfy",function(e,n){n&&i(this,"message",n);var r=i(this,"object");this.assert(e(r),"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),this.negate?!1:!0,e(r))}),n.addMethod("closeTo",function(e,t,n){n&&i(this,"message",n);var r=i(this,"object");this.assert(Math.abs(r-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}),n.addMethod("members",function(e,t){t&&i(this,"message",t);var r=i(this,"object");(new n(r)).to.be.an("array"),(new n(e)).to.be.an("array");if(i(this,"contains"))return this.assert(E(e,r),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,e);this.assert(E(r,e)&&E(e,r),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,e)})}}),require.register("chai/lib/chai/interface/assert.js",function(exports,require,module){module.exports=function(chai,util){var Assertion=chai.Assertion,flag=util.flag,assert=chai.assert=function(e,t){var n=new Assertion(null);n.assert(e,t,"[ negation message unavailable ]")};assert.fail=function(e,t,n,r){throw new chai.AssertionError({actual:e,expected:t,message:n,operator:r,stackStartFunction:assert.fail})},assert.ok=function(e,t){(new Assertion(e,t)).is.ok},assert.notOk=function(e,t){(new Assertion(e,t)).is.not.ok},assert.equal=function(e,t,n){var r=new Assertion(e,n);r.assert(t==flag(r,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e)},assert.notEqual=function(e,t,n){var r=new Assertion(e,n);r.assert(t!=flag(r,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e)},assert.strictEqual=function(e,t,n){(new Assertion(e,n)).to.equal(t)},assert.notStrictEqual=function(e,t,n){(new Assertion(e,n)).to.not.equal(t)},assert.deepEqual=function(e,t,n){(new Assertion(e,n)).to.eql(t)},assert.notDeepEqual=function(e,t,n){(new Assertion(e,n)).to.not.eql(t)},assert.isTrue=function(e,t){(new Assertion(e,t)).is["true"]},assert.isFalse=function(e,t){(new Assertion(e,t)).is["false"]},assert.isNull=function(e,t){(new Assertion(e,t)).to.equal(null)},assert.isNotNull=function(e,t){(new Assertion(e,t)).to.not.equal(null)},assert.isUndefined=function(e,t){(new Assertion(e,t)).to.equal(undefined)},assert.isDefined=function(e,t){(new Assertion(e,t)).to.not.equal(undefined)},assert.isFunction=function(e,t){(new Assertion(e,t)).to.be.a("function")},assert.isNotFunction=function(e,t){(new Assertion(e,t)).to.not.be.a("function")},assert.isObject=function(e,t){(new Assertion(e,t)).to.be.a("object")},assert.isNotObject=function(e,t){(new Assertion(e,t)).to.not.be.a("object")},assert.isArray=function(e,t){(new Assertion(e,t)).to.be.an("array")},assert.isNotArray=function(e,t){(new Assertion(e,t)).to.not.be.an("array")},assert.isString=function(e,t){(new Assertion(e,t)).to.be.a("string")},assert.isNotString=function(e,t){(new Assertion(e,t)).to.not.be.a("string")},assert.isNumber=function(e,t){(new Assertion(e,t)).to.be.a("number")},assert.isNotNumber=function(e,t){(new Assertion(e,t)).to.not.be.a("number")},assert.isBoolean=function(e,t){(new Assertion(e,t)).to.be.a("boolean")},assert.isNotBoolean=function(e,t){(new Assertion(e,t)).to.not.be.a("boolean")},assert.typeOf=function(e,t,n){(new Assertion(e,n)).to.be.a(t)},assert.notTypeOf=function(e,t,n){(new Assertion(e,n)).to.not.be.a(t)},assert.instanceOf=function(e,t,n){(new Assertion(e,n)).to.be.instanceOf(t)},assert.notInstanceOf=function(e,t,n){(new Assertion(e,n)).to.not.be.instanceOf(t)},assert.include=function(e,t,n){var r=new Assertion(e,n);if(Array.isArray(e))r.to.include(t);else{if("string"!=typeof e)throw new chai.AssertionError("expected an array or string",null,assert.include);r.to.contain.string(t)}},assert.notInclude=function(e,t,n){var r=new Assertion(e,n);if(Array.isArray(e))r.to.not.include(t);else{if("string"!=typeof e)throw new chai.AssertionError("expected an array or string",null,assert.notInclude);r.to.not.contain.string(t)}},assert.match=function(e,t,n){(new Assertion(e,n)).to.match(t)},assert.notMatch=function(e,t,n){(new Assertion(e,n)).to.not.match(t)},assert.property=function(e,t,n){(new Assertion(e,n)).to.have.property(t)},assert.notProperty=function(e,t,n){(new Assertion(e,n)).to.not.have.property(t)},assert.deepProperty=function(e,t,n){(new Assertion(e,n)).to.have.deep.property(t)},assert.notDeepProperty=function(e,t,n){(new Assertion(e,n)).to.not.have.deep.property(t)},assert.propertyVal=function(e,t,n,r){(new Assertion(e,r)).to.have.property(t,n)},assert.propertyNotVal=function(e,t,n,r){(new Assertion(e,r)).to.not.have.property(t,n)},assert.deepPropertyVal=function(e,t,n,r){(new Assertion(e,r)).to.have.deep.property(t,n)},assert.deepPropertyNotVal=function(e,t,n,r){(new Assertion(e,r)).to.not.have.deep.property(t,n)},assert.lengthOf=function(e,t,n){(new Assertion(e,n)).to.have.length(t)},assert.Throw=function(e,t,n,r){if("string"==typeof t||t instanceof RegExp)n=t,t=null;(new Assertion(e,r)).to.Throw(t,n)},assert.doesNotThrow=function(e,t,n){"string"==typeof t&&(n=t,t=null),(new Assertion(e,n)).to.not.Throw(t)},assert.operator=function(val,operator,val2,msg){if(!~["==","===",">",">=","<","<=","!=","!=="].indexOf(operator))throw new Error('Invalid operator "'+operator+'"');var test=new Assertion(eval(val+operator+val2),msg);test.assert(!0===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))},assert.closeTo=function(e,t,n,r){(new Assertion(e,r)).to.be.closeTo(t,n)},assert.sameMembers=function(e,t,n){(new Assertion(e,n)).to.have.same.members(t)},assert.includeMembers=function(e,t,n){(new Assertion(e,n)).to.include.members(t)},assert.ifError=function(e,t){(new Assertion(e,t)).to.not.be.ok},function alias(e,t){return assert[t]=assert[e],alias}("Throw","throw")("Throw","throws")}}),require.register("chai/lib/chai/interface/expect.js",function(e,t,n){n.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)}}}),require.register("chai/lib/chai/interface/should.js",function(e,t,n){n.exports=function(e,t){function r(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function(){return this instanceof String||this instanceof Number?new n(this.constructor(this)):this instanceof Boolean?new n(this==1):new n(this)},configurable:!0});var e={};return e.equal=function(e,t,r){(new n(e,r)).to.equal(t)},e.Throw=function(e,t,r,i){(new n(e,i)).to.Throw(t,r)},e.exist=function(e,t){(new n(e,t)).to.exist},e.not={},e.not.equal=function(e,t,r){(new n(e,r)).to.not.equal(t)},e.not.Throw=function(e,t,r,i){(new n(e,i)).to.not.Throw(t,r)},e.not.exist=function(e,t){(new n(e,t)).to.not.exist},e["throw"]=e.Throw,e.not["throw"]=e.not.Throw,e}var n=e.Assertion;e.should=r,e.Should=r}}),require.register("chai/lib/chai/utils/addChainableMethod.js",function(e,t,n){var r=t("./transferFlags"),i="__proto__"in Object,s=/^(?:length|name|arguments|caller)$/,o=Function.prototype.call,u=Function.prototype.apply;n.exports=function(e,t,n,a){typeof a!="function"&&(a=function(){}),Object.defineProperty(e,t,{get:function(){a.call(this);var t=function(){var e=n.apply(this,arguments);return e===undefined?this:e};if(i){var f=t.__proto__=Object.create(this);f.call=o,f.apply=u}else{var l=Object.getOwnPropertyNames(e);l.forEach(function(n){if(!s.test(n)){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r)}})}return r(this,t),t},configurable:!0})}}),require.register("chai/lib/chai/utils/addMethod.js",function(e,t,n){n.exports=function(e,t,n){e[t]=function(){var e=n.apply(this,arguments);return e===undefined?this:e}}}),require.register("chai/lib/chai/utils/addProperty.js",function(e,t,n){n.exports=function(e,t,n){Object.defineProperty(e,t,{get:function(){var e=n.call(this);return e===undefined?this:e},configurable:!0})}}),require.register("chai/lib/chai/utils/flag.js",function(e,t,n){n.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(arguments.length!==3)return r[t];r[t]=n}}),require.register("chai/lib/chai/utils/getActual.js",function(e,t,n){n.exports=function(e,t){var n=t[4];return"undefined"!=typeof n?n:e._obj}}),require.register("chai/lib/chai/utils/getEnumerableProperties.js",function(e,t,n){n.exports=function(t){var n=[];for(var r in t)n.push(r);return n}}),require.register("chai/lib/chai/utils/getMessage.js",function(e,t,n){var r=t("./flag"),i=t("./getActual"),s=t("./inspect"),o=t("./objDisplay");n.exports=function(e,t){var n=r(e,"negate"),s=r(e,"object"),u=t[3],a=i(e,t),f=n?t[2]:t[1],l=r(e,"message");return f=f||"",f=f.replace(/#{this}/g,o(s)).replace(/#{act}/g,o(a)).replace(/#{exp}/g,o(u)),l?l+": "+f:f}}),require.register("chai/lib/chai/utils/getName.js",function(e,t,n){n.exports=function(e){if(e.name)return e.name;var t=/^\s?function ([^(]*)\(/.exec(e);return t&&t[1]?t[1]:""}}),require.register("chai/lib/chai/utils/getPathValue.js",function(e,t,n){function i(e){var t=e.replace(/\[/g,".["),n=t.match(/(\\\.|[^.]+?)+/g);return n.map(function(e){var t=/\[(\d+)\]$/,n=t.exec(e);return n?{i:parseFloat(n[1])}:{p:e}})}function s(e,t){var n=t,r;for(var i=0,s=e.length;i<s;i++){var o=e[i];n?("undefined"!=typeof o.p?n=n[o.p]:"undefined"!=typeof o.i&&(n=n[o.i]),i==s-1&&(r=n)):r=undefined}return r}var r=n.exports=function(e,t){var n=i(e);return s(n,t)}}),require.register("chai/lib/chai/utils/getProperties.js",function(e,t,n){n.exports=function(t){function r(e){n.indexOf(e)===-1&&n.push(e)}var n=Object.getOwnPropertyNames(subject),i=Object.getPrototypeOf(subject);while(i!==null)Object.getOwnPropertyNames(i).forEach(r),i=Object.getPrototypeOf(i);return n}}),require.register("chai/lib/chai/utils/index.js",function(e,t,n){var e=n.exports={};e.test=t("./test"),e.type=t("./type"),e.getMessage=t("./getMessage"),e.getActual=t("./getActual"),e.inspect=t("./inspect"),e.objDisplay=t("./objDisplay"),e.flag=t("./flag"),e.transferFlags=t("./transferFlags"),e.eql=t("deep-eql"),e.getPathValue=t("./getPathValue"),e.getName=t("./getName"),e.addProperty=t("./addProperty"),e.addMethod=t("./addMethod"),e.overwriteProperty=t("./overwriteProperty"),e.overwriteMethod=t("./overwriteMethod"),e.addChainableMethod=t("./addChainableMethod")}),require.register("chai/lib/chai/utils/inspect.js",function(e,t,n){function o(e,t,n,r){var i={showHidden:t,seen:[],stylize:function(e){return e}};return f(i,e,typeof n=="undefined"?2:n)}function f(t,n,o){if(n&&typeof n.inspect=="function"&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var b=n.inspect(o);return typeof b!="string"&&(b=f(t,b,o)),b}var w=l(t,n);if(w)return w;if(a(n))return u(n);var E=s(n),S=t.showHidden?i(n):E;if(S.length===0||y(n)&&(S.length===1&&S[0]==="stack"||S.length===2&&S[0]==="description"&&S[1]==="stack")){if(typeof n=="function"){var x=r(n),T=x?": "+x:"";return t.stylize("[Function"+T+"]","special")}if(m(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(g(n))return t.stylize(Date.prototype.toUTCString.call(n),"date");if(y(n))return c(n)}var N="",C=!1,k=["{","}"];v(n)&&(C=!0,k=["[","]"]);if(typeof n=="function"){var x=r(n),T=x?": "+x:"";N=" [Function"+T+"]"}m(n)&&(N=" "+RegExp.prototype.toString.call(n)),g(n)&&(N=" "+Date.prototype.toUTCString.call(n));if(y(n))return c(n);if(S.length!==0||!!C&&n.length!=0){if(o<0)return m(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var L;return C?L=h(t,n,o,E,S):L=S.map(function(e){return p(t,n,o,E,e,C)}),t.seen.pop(),d(L,N,k)}return k[0]+N+k[1]}function l(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean")}if(t===null)return e.stylize("null","null")}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i){var s=[];for(var o=0,u=t.length;o<u;++o)Object.prototype.hasOwnProperty.call(t,String(o))?s.push(p(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,u;t.__lookupGetter__&&(t.__lookupGetter__(i)?t.__lookupSetter__(i)?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):t.__lookupSetter__(i)&&(u=e.stylize("[Setter]","special"))),r.indexOf(i)<0&&(o="["+i+"]"),u||(e.seen.indexOf(t[i])<0?(n===null?u=f(e,t[i],null):u=f(e,t[i],n-1),u.indexOf("\n")>-1&&(s?u=u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):u="\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special"));if(typeof o=="undefined"){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.length+1},0);return i>60?n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function v(e){return Array.isArray(e)||typeof e=="object"&&b(e)==="[object Array]"}function m(e){return typeof e=="object"&&b(e)==="[object RegExp]"}function g(e){return typeof e=="object"&&b(e)==="[object Date]"}function y(e){return typeof e=="object"&&b(e)==="[object Error]"}function b(e){return Object.prototype.toString.call(e)}var r=t("./getName"),i=t("./getProperties"),s=t("./getEnumerableProperties");n.exports=o;var u=function(e){if("outerHTML"in e)return e.outerHTML;var t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"_"),r=(window.HTMLElement||window.Element).prototype,i=new XMLSerializer,s;return document.xmlVersion?i.serializeToString(e):(n.appendChild(e.cloneNode(!1)),s=n.innerHTML.replace("><",">"+e.innerHTML+"<"),n.innerHTML="",s)},a=function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"}}),require.register("chai/lib/chai/utils/objDisplay.js",function(e,t,n){var r=t("./inspect");n.exports=function(e){var t=r(e),n=Object.prototype.toString.call(e);if(t.length>=40){if(n==="[object Function]")return!e.name||e.name===""?"[Function]":"[Function: "+e.name+"]";if(n==="[object Array]")return"[ Array("+e.length+") ]";if(n==="[object Object]"){var i=Object.keys(e),s=i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", ");return"{ Object ("+s+") }"}return t}return t}}),require.register("chai/lib/chai/utils/overwriteMethod.js",function(e,t,n){n.exports=function(e,t,n){var r=e[t],i=function(){return this};r&&"function"==typeof r&&(i=r),e[t]=function(){var e=n(i).apply(this,arguments);return e===undefined?this:e}}}),require.register("chai/lib/chai/utils/overwriteProperty.js",function(e,t,n){n.exports=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t),i=function(){};r&&"function"==typeof r.get&&(i=r.get),Object.defineProperty(e,t,{get:function(){var e=n(i).call(this);return e===undefined?this:e},configurable:!0})}}),require.register("chai/lib/chai/utils/test.js",function(e,t,n){var r=t("./flag");n.exports=function(e,t){var n=r(e,"negate"),i=t[0];return n?!i:i}}),require.register("chai/lib/chai/utils/transferFlags.js",function(e,t,n){n.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));t.__flags||(t.__flags=Object.create(null)),n=arguments.length===3?n:!0;for(var i in r)if(n||i!=="object"&&i!=="ssfi"&&i!="message")t.__flags[i]=r[i]}}),require.register("chai/lib/chai/utils/type.js",function(e,t,n){var r={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};n.exports=function(e){var t=Object.prototype.toString.call(e);return r[t]?r[t]:e===null?"null":e===undefined?"undefined":e===Object(e)?"object":typeof e}}),require.alias("chaijs-assertion-error/index.js","chai/deps/assertion-error/index.js"),require.alias("chaijs-assertion-error/index.js","chai/deps/assertion-error/index.js"),require.alias("chaijs-assertion-error/index.js","assertion-error/index.js"),require.alias("chaijs-assertion-error/index.js","chaijs-assertion-error/index.js"),require.alias("chaijs-deep-eql/lib/eql.js","chai/deps/deep-eql/lib/eql.js"),require.alias("chaijs-deep-eql/lib/eql.js","chai/deps/deep-eql/index.js"),require.alias("chaijs-deep-eql/lib/eql.js","deep-eql/index.js"),require.alias("chaijs-type-detect/lib/type.js","chaijs-deep-eql/deps/type-detect/lib/type.js"),require.alias("chaijs-type-detect/lib/type.js","chaijs-deep-eql/deps/type-detect/index.js"),require.alias("chaijs-type-detect/lib/type.js","chaijs-type-detect/index.js"),require.alias("chaijs-deep-eql/lib/eql.js","chaijs-deep-eql/index.js"),require.alias("chai/index.js","chai/index.js"),typeof exports=="object"?module.exports=require("chai"):typeof define=="function"&&define.amd?define("chai",["chai"],function(){return require("chai")}):this.chai=require("chai")})(),define("src/both/core",["winston","util","chai"],function(e,t,n){return e.remove&&(e.remove(e.transports.Console),e.add(e.transports.Console,{colorize:!0,level:"info",timestamp:!0})),n.Assertion.includeStack=!0,n.Assertion.showDiff=!1,{should:n.should(),expect:n.expect,processError:function(e,n){if(n)throw new Error(e+" returned an error: '"+t.inspect(n)+"'")},showLogs:!0,processVar:function(n,r){if(!r)throw new Error(n+" was not set");this.showLogs&&e.info(n+" had the value "+t.inspect(r))}}});var sinon=function(e){function r(e){var n=!1;try{e.appendChild(t),n=t.parentNode==e}catch(r){return!1}finally{try{e.removeChild(t)}catch(r){}}return n}function i(e){return t&&e&&e.nodeType===1&&r(e)}function s(e){return typeof e=="function"||!!(e&&e.constructor&&e.call&&e.apply)}function o(e,t){for(var r in t)n.call(e,r)||(e[r]=t[r])}function u(e){return typeof e=="function"&&typeof e.restore=="function"&&e.restore.sinon}var t=typeof document!="undefined"&&document.createElement("div"),n=Object.prototype.hasOwnProperty,a={wrapMethod:function(t,r,i){if(!t)throw new TypeError("Should wrap property of object");if(typeof i!="function")throw new TypeError("Method wrapper should be function");var u=t[r];if(!s(u))throw new TypeError("Attempted to wrap "+typeof u+" property "+r+" as function");if(u.restore&&u.restore.sinon)throw new TypeError("Attempted to wrap "+r+" which is already wrapped");if(u.calledBefore){var a=u.returns?"stubbed":"spied on";throw new TypeError("Attempted to wrap "+r+" which is already "+a)}var f=n.call(t,r);return t[r]=i,i.displayName=r,i.restore=function(){f||delete t[r],t[r]===i&&(t[r]=u)},i.restore.sinon=!0,o(i,u),i},extend:function(t){for(var n=1,r=arguments.length;n<r;n+=1)for(var i in arguments[n])arguments[n].hasOwnProperty(i)&&(t[i]=arguments[n][i]),arguments[n].hasOwnProperty("toString")&&arguments[n].toString!=t.toString&&(t.toString=arguments[n].toString);return t},create:function(t){var n=function(){};return n.prototype=t,new n},deepEqual:function p(e,t){if(a.match&&a.match.isMatcher(e))return e.test(t);if(typeof e!="object"||typeof t!="object")return e===t;if(i(e)||i(t))return e===t;if(e===t)return!0;if(e===null&&t!==null||e!==null&&t===null)return!1;var n=Object.prototype.toString.call(e);if(n!=Object.prototype.toString.call(t))return!1;if(n=="[object Array]"){if(e.length!==t.length)return!1;for(var r=0,s=e.length;r<s;r+=1)if(!p(e[r],t[r]))return!1;return!0}if(n=="[object Date]")return e.valueOf()===t.valueOf();var o,u=0,f=0;for(o in e){u+=1;if(!p(e[o],t[o]))return!1}for(o in t)f+=1;return u==f},functionName:function(t){var n=t.displayName||t.name;if(!n){var r=t.toString().match(/function ([^\s\(]+)/);n=r&&r[1]}return n},functionToString:function d(){if(this.getCall&&this.callCount){var e,t,n=this.callCount;while(n--){e=this.getCall(n).thisValue;for(t in e)if(e[t]===this)return t}}return this.displayName||"sinon fake"},getConfig:function(e){var t={};e=e||{};var n=a.defaultConfig;for(var r in n)n.hasOwnProperty(r)&&(t[r]=e.hasOwnProperty(r)?e[r]:n[r]);return t},format:function(e){return""+e},defaultConfig:{injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},timesInWords:function(t){return t==1&&"once"||t==2&&"twice"||t==3&&"thrice"||(t||0)+" times"},calledInOrder:function(e){for(var t=1,n=e.length;t<n;t++)if(!e[t-1].calledBefore(e[t])||!e[t].called)return!1;return!0},orderByFirstCall:function(e){return e.sort(function(e,t){var n=e.getCall(0),r=t.getCall(0),i=n&&n.callId||-1,s=r&&r.callId||-1;return i<s?-1:1})},log:function(){},logError:function(e,t){var n=e+" threw exception: ";a.log(n+"["+t.name+"] "+t.message),t.stack&&a.log(t.stack),setTimeout(function(){throw t.message=n+t.message,t},0)},typeOf:function(e){if(e===null)return"null";if(e===undefined)return"undefined";var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},createStubInstance:function(e){if(typeof e!="function")throw new TypeError("The constructor should be a function.");return a.stub(a.create(e.prototype))},restore:function(e){if(e!==null&&typeof e=="object")for(var t in e)u(e[t])&&e[t].restore();else u(e)&&e.restore()}},f=typeof module=="object"&&typeof require=="function";if(f){try{e={format:require("buster-format")}}catch(l){}module.exports=a,module.exports.spy=require("./sinon/spy"),module.exports.spyCall=require("./sinon/call"),module.exports.stub=require("./sinon/stub"),module.exports.mock=require("./sinon/mock"),module.exports.collection=require("./sinon/collection"),module.exports.assert=require("./sinon/assert"),module.exports.sandbox=require("./sinon/sandbox"),module.exports.test=require("./sinon/test"),module.exports.testCase=require("./sinon/test_case"),module.exports.assert=require("./sinon/assert"),module.exports.match=require("./sinon/match")}if(e){var c=a.create(e.format);c.quoteStrings=!1,a.format=function(){return c.ascii.apply(c,arguments)}}else if(f)try{var h=require("util");a.format=function(e){return typeof e=="object"&&e.toString===Object.prototype.toString?h.inspect(e):e}}catch(l){}return a}(typeof buster=="object"&&buster);(function(e){function n(t,n,r){var i=e.typeOf(t);if(i!==n)throw new TypeError("Expected type of "+r+" to be "+n+", but was "+i)}function i(e){return r.isPrototypeOf(e)}function s(t,n){if(n===null||n===undefined)return!1;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],u=n[r];if(o.isMatcher(i)){if(!i.test(u))return!1}else if(e.typeOf(i)==="object"){if(!s(i,u))return!1}else if(!e.deepEqual(i,u))return!1}return!0}function u(t,r){return function(i,s){n(i,"string","property");var u=arguments.length===1,a=r+'("'+i+'"';return u||(a+=", "+s),a+=")",o(function(n){return n===undefined||n===null||!t(n,i)?!1:u||e.deepEqual(s,n[i])},a)}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;var r={toString:function(){return this.message}};r.or=function(t){if(!i(t))throw new TypeError("Matcher expected");var n=this,s=e.create(r);return s.test=function(e){return n.test(e)||t.test(e)},s.message=n.message+".or("+t.message+")",s},r.and=function(t){if(!i(t))throw new TypeError("Matcher expected");var n=this,s=e.create(r);return s.test=function(e){return n.test(e)&&t.test(e)},s.message=n.message+".and("+t.message+")",s};var o=function(t,n){var i=e.create(r),o=e.typeOf(t);switch(o){case"object":if(typeof t.test=="function")return i.test=function(e){return t.test(e)===!0},i.message="match("+e.functionName(t.test)+")",i;var u=[];for(var a in t)t.hasOwnProperty(a)&&u.push(a+": "+t[a]);i.test=function(e){return s(t,e)},i.message="match("+u.join(", ")+")";break;case"number":i.test=function(e){return t==e};break;case"string":i.test=function(e){return typeof e!="string"?!1:e.indexOf(t)!==-1},i.message='match("'+t+'")';break;case"regexp":i.test=function(e){return typeof e!="string"?!1:t.test(e)};break;case"function":i.test=t,n?i.message=n:i.message="match("+e.functionName(t)+")";break;default:i.test=function(n){return e.deepEqual(t,n)}}return i.message||(i.message="match("+t+")"),i};o.isMatcher=i,o.any=o(function(){return!0},"any"),o.defined=o(function(e){return e!==null&&e!==undefined},"defined"),o.truthy=o(function(e){return!!e},"truthy"),o.falsy=o(function(e){return!e},"falsy"),o.same=function(e){return o(function(t){return e===t},"same("+e+")")},o.typeOf=function(t){return n(t,"string","type"),o(function(n){return e.typeOf(n)===t},'typeOf("'+t+'")')},o.instanceOf=function(t){return n(t,"function","type"),o(function(e){return e instanceof t},"instanceOf("+e.functionName(t)+")")},o.has=u(function(e,t){return typeof e=="object"?t in e:e[t]!==undefined},"has"),o.hasOwn=u(function(e,t){return e.hasOwnProperty(t)},"hasOwn"),o.bool=o.typeOf("boolean"),o.number=o.typeOf("number"),o.string=o.typeOf("string"),o.object=o.typeOf("object"),o.func=o.typeOf("function"),o.array=o.typeOf("array"),o.regexp=o.typeOf("regexp"),o.date=o.typeOf("date"),t?module.exports=o:e.match=o})(typeof sinon=="object"&&sinon||null),function(e){function n(t,n,i){var s=e.functionName(t)+n;throw i.length&&(s+=" Received ["+r.call(i).join(", ")+"]"),new Error(s)}function s(t,n,r,s,o,u){if(typeof u!="number")throw new TypeError("Call id is not a number");var a=e.create(i);return a.proxy=t,a.thisValue=n,a.args=r,a.returnValue=s,a.exception=o,a.callId=u,a}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;var r=Array.prototype.slice,i={calledOn:function(n){return e.match&&e.match.isMatcher(n)?n.test(this.thisValue):this.thisValue===n},calledWith:function(){for(var n=0,r=arguments.length;n<r;n+=1)if(!e.deepEqual(arguments[n],this.args[n]))return!1;return!0},calledWithMatch:function(){for(var n=0,r=arguments.length;n<r;n+=1){var i=this.args[n],s=arguments[n];if(!e.match||!e.match(s).test(i))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(n){return e.deepEqual(n,this.returnValue)},threw:function(t){return typeof t=="undefined"||!this.exception?!!this.exception:this.exception===t||this.exception.name===t},calledWithNew:function(t){return this.thisValue instanceof this.proxy},calledBefore:function(e){return this.callId<e.callId},calledAfter:function(e){return this.callId>e.callId},callArg:function(e){this.args[e]()},callArgOn:function(e,t){this.args[e].apply(t)},callArgWith:function(e){this.callArgOnWith.apply(this,[e,null].concat(r.call(arguments,1)))},callArgOnWith:function(e,t){var n=r.call(arguments,2);this.args[e].apply(t,n)},yield:function(){this.yieldOn.apply(this,[null].concat(r.call(arguments,0)))},yieldOn:function(e){var t=this.args;for(var i=0,s=t.length;i<s;++i)if(typeof t[i]=="function"){t[i].apply(e,r.call(arguments,1));return}n(this.proxy," cannot yield since no callback was passed.",t)},yieldTo:function(e){this.yieldToOn.apply(this,[e,null].concat(r.call(arguments,1)))},yieldToOn:function(e,t){var i=this.args;for(var s=0,o=i.length;s<o;++s)if(i[s]&&typeof i[s][e]=="function"){i[s][e].apply(t,r.call(arguments,2));return}n(this.proxy," cannot yield to '"+e+"' since no callback was passed.",i)},toString:function(){var t=this.proxy.toString()+"(",n=[];for(var r=0,i=this.args.length;r<i;++r)n.push(e.format(this.args[r]));return t=t+n.join(", ")+")",typeof this.returnValue!="undefined"&&(t+=" => "+e.format(this.returnValue)),this.exception&&(t+=" !"+this.exception.name,this.exception.message&&(t+="("+this.exception.message+")")),t}};i.invokeCallback=i.yield,s.toString=i.toString,t?module.exports=s:e.spyCall=s}(typeof sinon=="object"&&sinon||null),function(sinon){function spy(e,t){if(!t&&typeof e=="function")return spy.create(e);if(!e&&!t)return spy.create(function(){});var n=e[t];return sinon.wrapMethod(e,t,spy.create(n))}function matchingFake(e,t,n){if(!e)return;var r=t.length;for(var i=0,s=e.length;i<s;i++)if(e[i].matches(t,n))return e[i]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=this.callCount==1,this.calledTwice=this.callCount==2,this.calledThrice=this.callCount==3}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,func.length*2-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(e,t,n,r){spyApi[e]=function(){if(!this.called)return r?r.apply(this,arguments):!1;var i,s=0;for(var o=0,u=this.callCount;o<u;o+=1){i=this.getCall(o);if(i[n||e].apply(i,arguments)){s+=1;if(t)return!0}}return s===this.callCount}}var commonJSModule=typeof module=="object"&&typeof require=="function",push=Array.prototype.push,slice=Array.prototype.slice,callId=0;!sinon&&commonJSModule&&(sinon=require("../sinon"));if(!sinon)return;var vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[];if(this.fakes)for(var e=0;e<this.fakes.length;e++)this.fakes[e].reset()},create:function(t){var n;typeof t!="function"?t=function(){}:n=sinon.functionName(t);var r=createProxy(t);return sinon.extend(r,spy),delete r.create,sinon.extend(r,t),r.reset(),r.prototype=t.prototype,r.displayName=n||"spy",r.toString=sinon.functionToString,r._create=sinon.spy.create,r.id="spy#"+uuid++,r},invoke:function(t,n,r){var i=matchingFake(this.fakes,r),s,o;incrementCallCount.call(this),push.call(this.thisValues,n),push.call(this.args,r),push.call(this.callIds,callId++);try{i?o=i.invoke(t,n,r):o=(this.func||t).apply(n,r)}catch(u){throw push.call(this.returnValues,undefined),s=u,u}finally{push.call(this.exceptions,s)}return push.call(this.returnValues,o),createCallProperties.call(this),o},getCall:function(t){return t<0||t>=this.callCount?null:sinon.spyCall(this,this.thisValues[t],this.args[t],this.returnValues[t],this.exceptions[t],this.callIds[t])},calledBefore:function(t){return this.called?t.called?this.callIds[0]<t.callIds[t.callIds.length-1]:!0:!1},calledAfter:function(t){return!this.called||!t.called?!1:this.callIds[this.callCount-1]>t.callIds[t.callCount-1]},withArgs:function(){var e=slice.call(arguments);if(this.fakes){var t=matchingFake(this.fakes,e,!0);if(t)return t}else this.fakes=[];var n=this,r=this._create();r.matchingAguments=e,push.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var i=0;i<this.args.length;i++)r.matches(this.args[i])&&(incrementCallCount.call(r),push.call(r.thisValues,this.thisValues[i]),push.call(r.args,this.args[i]),push.call(r.returnValues,this.returnValues[i]),push.call(r.exceptions,this.exceptions[i]),push.call(r.callIds,this.callIds[i]));return createCallProperties.call(r),r},matches:function(e,t){var n=this.matchingAguments;if(n.length<=e.length&&sinon.deepEqual(n,e.slice(0,n.length)))return!t||n.length==e.length},printf:function(e){var t=this,n=slice.call(arguments,1),r;return(e||"").replace(/%(.)/g,function(e,i){return r=spyApi.formatters[i],typeof r=="function"?r.call(null,t,n):isNaN(parseInt(i),10)?"%"+i:sinon.format(n[i-1])})}};delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("calledWithNew",!0),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi.yield,delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),spyApi.formatters={c:function(e){return sinon.timesInWords(e.callCount)},n:function(e){return e.toString()},C:function(e){var t=[];for(var n=0,r=e.callCount;n<r;++n){var i="    "+e.getCall(n).toString();/\n/.test(t[n-1])&&(i="\n"+i),push.call(t,i)}return t.length>0?"\n"+t.join("\n"):""},t:function(e){var t=[];for(var n=0,r=e.callCount;n<r;++n)push.call(t,sinon.format(e.thisValues[n]));return t.join(", ")},"*":function(e,t){var n=[];for(var r=0,i=t.length;r<i;++r)push.call(n,sinon.format(t[r]));return n.join(", ")}},sinon.extend(spy,spyApi),spy.spyCall=sinon.spyCall,commonJSModule?module.exports=spy:sinon.spy=spy}(typeof sinon=="object"&&sinon||null),function(e){function n(t,r,i){if(!i||typeof i=="function"){var s;i?s=e.spy&&e.spy.create?e.spy.create(i):i:s=n.create();if(!t&&!r)return e.stub.create();if(!r&&!!t&&typeof t=="object"){for(var o in t)typeof t[o]=="function"&&n(t,o);return t}return e.wrapMethod(t,r,s)}throw new TypeError("Custom stub should be function")}function r(e,t){var n=e.callCount-1,r=e[t],i=n in r?r[n]:r[r.length-1];return e[t+"Last"]=i,i}function i(e,t){var n=r(e,"callArgAts");if(n<0){var i=r(e,"callArgProps");for(var s=0,o=t.length;s<o;++s){if(!i&&typeof t[s]=="function")return t[s];if(i&&t[s]&&typeof t[s][i]=="function")return t[s][i]}return null}return t[n]}function o(t,n,r){if(t.callArgAtsLast<0){var i;return t.callArgPropsLast?i=e.functionName(t)+" expected to yield to '"+t.callArgPropsLast+"', but no object with such a property was passed.":i=e.functionName(t)+" expected to yield, but no callback was passed.",r.length>0&&(i+=" Received ["+s.call(r,", ")+"]"),i}return"argument at index "+t.callArgAtsLast+" is not a function: "+n}function a(e,t){if(e.callArgAts.length>0){var n=i(e,t);if(typeof n!="function")throw new TypeError(o(e,n,t));var s=r(e,"callbackArguments"),a=r(e,"callbackContexts");e.callbackAsync?u(function(){n.apply(a,s)}):n.apply(a,s)}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;var s=Array.prototype.join,u=function(){return typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:typeof setImmediate=="function"?setImmediate:function(e){setTimeout(e,0)}}(),f=0;e.extend(n,function(){function i(e,t){return typeof e=="string"?(this.exception=new Error(t||""),this.exception.name=e):e?this.exception=e:this.exception=new Error("Error"),this}var t=Array.prototype.slice,r;r={create:function(){var r=function(){a(r,arguments);if(r.exception)throw r.exception;return typeof r.returnArgAt=="number"?arguments[r.returnArgAt]:r.returnThis?this:r.returnValue};r.id="stub#"+f++;var i=r;return r=e.spy.create(r),r.func=i,r.callArgAts=[],r.callbackArguments=[],r.callbackContexts=[],r.callArgProps=[],e.extend(r,n),r._create=e.stub.create,r.displayName="stub",r.toString=e.functionToString,r},resetBehavior:function(){var e;this.callArgAts=[],this.callbackArguments=[],this.callbackContexts=[],this.callArgProps=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1;if(this.fakes)for(e=0;e<this.fakes.length;e++)this.fakes[e].resetBehavior()},returns:function(t){return this.returnValue=t,this},returnsArg:function(t){if(typeof t!="number")throw new TypeError("argument index is not number");return this.returnArgAt=t,this},returnsThis:function(){return this.returnThis=!0,this},"throws":i,throwsException:i,callsArg:function(t){if(typeof t!="number")throw new TypeError("argument index is not number");return this.callArgAts.push(t),this.callbackArguments.push([]),this.callbackContexts.push(undefined),this.callArgProps.push(undefined),this},callsArgOn:function(t,n){if(typeof t!="number")throw new TypeError("argument index is not number");if(typeof n!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(t),this.callbackArguments.push([]),this.callbackContexts.push(n),this.callArgProps.push(undefined),this},callsArgWith:function(n){if(typeof n!="number")throw new TypeError("argument index is not number");return this.callArgAts.push(n),this.callbackArguments.push(t.call(arguments,1)),this.callbackContexts.push(undefined),this.callArgProps.push(undefined),this},callsArgOnWith:function(n,r){if(typeof n!="number")throw new TypeError("argument index is not number");if(typeof r!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(n),this.callbackArguments.push(t.call(arguments,2)),this.callbackContexts.push(r),this.callArgProps.push(undefined),this},yields:function(){return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,0)),this.callbackContexts.push(undefined),this.callArgProps.push(undefined),this},yieldsOn:function(e){if(typeof e!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,1)),this.callbackContexts.push(e),this.callArgProps.push(undefined),this},yieldsTo:function(e){return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,1)),this.callbackContexts.push(undefined),this.callArgProps.push(e),this},yieldsToOn:function(e,n){if(typeof n!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,2)),this.callbackContexts.push(n),this.callArgProps.push(e),this}};for(var s in r)r.hasOwnProperty(s)&&s.match(/^(callsArg|yields|thenYields$)/)&&!s.match(/Async/)&&(r[s+"Async"]=function(e){return function(){return this.callbackAsync=!0,this[e].apply(this,arguments)}}(s));return r}()),t?module.exports=n:e.stub=n}(typeof sinon=="object"&&sinon||null),function(e){function r(t){return t?r.create(t):e.expectation.create("Anonymous mock")}var t=typeof module=="object"&&typeof require=="function",n=[].push;!e&&t&&(e=require("../sinon"));if(!e)return;e.mock=r,e.extend(r,function(){function t(e,t){if(!e)return;for(var n=0,r=e.length;n<r;n+=1)t(e[n])}return{create:function(n){if(!n)throw new TypeError("object is null");var i=e.extend({},r);return i.object=n,delete i.create,i},expects:function(r){if(!r)throw new TypeError("method is falsy");this.expectations||(this.expectations={},this.proxies=[]);if(!this.expectations[r]){this.expectations[r]=[];var i=this;e.wrapMethod(this.object,r,function(){return i.invokeMethod(r,this,arguments)}),n.call(this.proxies,r)}var s=e.expectation.create(r);return n.call(this.expectations[r],s),s},restore:function(){var n=this.object;t(this.proxies,function(e){typeof n[e].restore=="function"&&n[e].restore()})},verify:function(){var i=this.expectations||{},s=[],o=[];return t(this.proxies,function(e){t(i[e],function(e){e.met()?n.call(o,e.toString()):n.call(s,e.toString())})}),this.restore(),s.length>0?e.expectation.fail(s.concat(o).join("\n")):e.expectation.pass(s.concat(o).join("\n")),!0},invokeMethod:function(r,i,s){var o=this.expectations&&this.expectations[r],u=o&&o.length||0,a;for(a=0;a<u;a+=1)if(!o[a].met()&&o[a].allowsCall(i,s))return o[a].apply(i,s);var f=[],l,c=0;for(a=0;a<u;a+=1)o[a].allowsCall(i,s)?l=l||o[a]:c+=1,n.call(f,"    "+o[a].toString());if(c===0)return l.apply(i,s);f.unshift("Unexpected call: "+e.spyCall.toString.call({proxy:r,args:s})),e.expectation.fail(f.join("\n"))}}}());var i=e.timesInWords;e.expectation=function(){function s(e){return e==0?"never called":"called "+i(e)}function o(e){var t=e.minCalls,n=e.maxCalls;if(typeof t=="number"&&typeof n=="number"){var r=i(t);return t!=n&&(r="at least "+r+" and at most "+i(n)),r}return typeof t=="number"?"at least "+i(t):"at most "+i(n)}function u(e){var t=typeof e.minCalls=="number";return!t||e.callCount>=e.minCalls}function a(e){return typeof e.maxCalls!="number"?!1:e.callCount==e.maxCalls}var t=Array.prototype.slice,r=e.spy.invoke;return{minCalls:1,maxCalls:1,create:function(n){var r=e.extend(e.stub.create(),e.expectation);return delete r.create,r.method=n,r},invoke:function(t,n,i){return this.verifyCallAllowed(n,i),r.apply(this,arguments)},atLeast:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=t,this},atMost:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=t,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not a number");return this.atLeast(t),this.atMost(t)},met:function(){return!this.failed&&u(this)},verifyCallAllowed:function(n,r){a(this)&&(this.failed=!0,e.expectation.fail(this.method+" already called "+i(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==n&&e.expectation.fail(this.method+" called with "+n+" as thisValue, expected "+this.expectedThis);if(!("expectedArguments"in this))return;r||e.expectation.fail(this.method+" received no arguments, expected "+e.format(this.expectedArguments)),r.length<this.expectedArguments.length&&e.expectation.fail(this.method+" received too few arguments ("+e.format(r)+"), expected "+e.format(this.expectedArguments)),this.expectsExactArgCount&&r.length!=this.expectedArguments.length&&e.expectation.fail(this.method+" received too many arguments ("+e.format(r)+"), expected "+e.format(this.expectedArguments));for(var s=0,o=this.expectedArguments.length;s<o;s+=1)e.deepEqual(this.expectedArguments[s],r[s])||e.expectation.fail(this.method+" received wrong arguments "+e.format(r)+", expected "+e.format(this.expectedArguments))},allowsCall:function(n,r){if(this.met()&&a(this))return!1;if("expectedThis"in this&&this.expectedThis!==n)return!1;if("expectedArguments"in this){r=r||[];if(r.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&r.length!=this.expectedArguments.length)return!1;for(var i=0,s=this.expectedArguments.length;i<s;i+=1)if(!e.deepEqual(this.expectedArguments[i],r[i]))return!1;return!0}return!0},withArgs:function(){return this.expectedArguments=t.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(t){return this.expectedThis=t,this},toString:function(){var t=(this.expectedArguments||[]).slice();this.expectsExactArgCount||n.call(t,"[...]");var r=e.spyCall.toString.call({proxy:this.method||"anonymous mock expectation",args:t}),i=r.replace(", [...","[, ...")+" "+o(this);return this.met()?"Expectation met: "+i:"Expected "+i+" ("+s(this.callCount)+")"},verify:function(){return this.met()?e.expectation.pass(this.toString()):e.expectation.fail(this.toString()),!0},pass:function(t){e.assert.pass(t)},fail:function(e){var t=new Error(e);throw t.name="ExpectationError",t}}}(),t?module.exports=r:e.mock=r}(typeof sinon=="object"&&sinon||null),function(e){function i(e){return e.fakes||(e.fakes=[]),e.fakes}function s(e,t){var n=i(e);for(var r=0,s=n.length;r<s;r+=1)typeof n[r][t]=="function"&&n[r][t]()}function o(e){var t=i(e),n=0;while(n<t.length)t.splice(n,1)}var t=typeof module=="object"&&typeof require=="function",n=[].push,r=Object.prototype.hasOwnProperty;!e&&t&&(e=require("../sinon"));if(!e)return;var u={verify:function(){s(this,"verify")},restore:function(){s(this,"restore"),o(this)},verifyAndRestore:function(){var t;try{this.verify()}catch(n){t=n}this.restore();if(t)throw t},add:function(t){return n.call(i(this),t),t},spy:function(){return this.add(e.spy.apply(e,arguments))},stub:function(n,i,s){if(i){var o=n[i];if(typeof o!="function"){if(!r.call(n,i))throw new TypeError("Cannot stub non-existent own property "+i);return n[i]=s,this.add({restore:function(){n[i]=o}})}}if(!i&&!!n&&typeof n=="object"){var u=e.stub.apply(e,arguments);for(var a in u)typeof u[a]=="function"&&this.add(u[a]);return u}return this.add(e.stub.apply(e,arguments))},mock:function(){return this.add(e.mock.apply(e,arguments))},inject:function(t){var n=this;return t.spy=function(){return n.spy.apply(n,arguments)},t.stub=function(){return n.stub.apply(n,arguments)},t.mock=function(){return n.mock.apply(n,arguments)},t}};t?module.exports=u:e.collection=u}(typeof sinon=="object"&&sinon||null);if(typeof sinon=="undefined")var sinon={};(function(global){function addTimer(e,t){if(e.length===0)throw new Error("Function requires at least 1 parameter");var n=id++,r=e[1]||0;return this.timeouts||(this.timeouts={}),this.timeouts[n]={id:n,func:e[0],callAt:this.now+r,invokeArgs:Array.prototype.slice.call(e,2)},t===!0&&(this.timeouts[n].interval=r),n}function parseTime(e){if(!e)return 0;var t=e.split(":"),n=t.length,r=n,i=0,s;if(n>3||!/^(\d\d:){0,2}\d\d?$/.test(e))throw new Error("tick only understands numbers and 'h:m:s'");while(r--){s=parseInt(t[r],10);if(s>=60)throw new Error("Invalid time "+e);i+=s*Math.pow(60,n-r-1)}return i*1e3}function createObject(e){var t;if(Object.create)t=Object.create(e);else{var n=function(){};n.prototype=e,t=new n}return t.Date.clock=t,t}function mirrorDateProperties(e,t){return t.now?e.now=function(){return e.clock.now}:delete e.now,t.toSource?e.toSource=function(){return t.toSource()}:delete e.toSource,e.toString=function n(){return t.toString()},e.prototype=t.prototype,e.parse=t.parse,e.UTC=t.UTC,e.prototype.toUTCString=t.prototype.toUTCString,e}function restore(){var e;for(var t=0,n=this.methods.length;t<n;t++)e=this.methods[t],global[e].hadOwnProperty?global[e]=this["_"+e]:delete global[e];this.methods=[]}function stubGlobal(e,t){t[e].hadOwnProperty=Object.prototype.hasOwnProperty.call(global,e),t["_"+e]=global[e];if(e=="Date"){var n=mirrorDateProperties(t[e],global[e]);global[e]=n}else{global[e]=function(){return t[e].apply(t,arguments)};for(var r in t[e])t[e].hasOwnProperty(r)&&(global[e][r]=t[e][r])}global[e].clock=t}var id=1;sinon.clock={now:0,create:function(t){var n=createObject(this);typeof t=="number"&&(n.now=t);if(!t||typeof t!="object")return n;throw new TypeError("now should be milliseconds since UNIX epoch")},setTimeout:function(t,n){return addTimer.call(this,arguments,!1)},clearTimeout:function(t){this.timeouts||(this.timeouts=[]),t in this.timeouts&&delete this.timeouts[t]},setInterval:function(t,n){return addTimer.call(this,arguments,!0)},clearInterval:function(t){this.clearTimeout(t)},tick:function(t){t=typeof t=="number"?t:parseTime(t);var n=this.now,r=this.now+t,i=this.now,s=this.firstTimerInRange(n,r),o;while(s&&n<=r){if(this.timeouts[s.id]){n=this.now=s.callAt;try{this.callTimer(s)}catch(u){o=o||u}}s=this.firstTimerInRange(i,r),i=n}this.now=r;if(o)throw o;return this.now},firstTimerInRange:function(e,t){var n,r,i;for(var s in this.timeouts)if(this.timeouts.hasOwnProperty(s)){if(this.timeouts[s].callAt<e||this.timeouts[s].callAt>t)continue;if(!r||this.timeouts[s].callAt<r)i=this.timeouts[s],r=this.timeouts[s].callAt,n={func:this.timeouts[s].func,callAt:this.timeouts[s].callAt,interval:this.timeouts[s].interval,id:this.timeouts[s].id,invokeArgs:this.timeouts[s].invokeArgs}}return n||null},callTimer:function(timer){typeof timer.interval=="number"?this.timeouts[timer.id].callAt+=timer.interval:delete this.timeouts[timer.id];try{typeof timer.func=="function"?timer.func.apply(null,timer.invokeArgs):eval(timer.func)}catch(e){var exception=e}if(!this.timeouts[timer.id]){if(exception)throw exception;return}if(exception)throw exception},reset:function(){this.timeouts={}},Date:function(){function t(n,r,i,s,o,u,a){switch(arguments.length){case 0:return new e(t.clock.now);case 1:return new e(n);case 2:return new e(n,r);case 3:return new e(n,r,i);case 4:return new e(n,r,i,s);case 5:return new e(n,r,i,s,o);case 6:return new e(n,r,i,s,o,u);default:return new e(n,r,i,s,o,u,a)}}var e=Date;return mirrorDateProperties(t,e)}()};var methods=["Date","setTimeout","setInterval","clearTimeout","clearInterval"];sinon.useFakeTimers=function(t){var n=sinon.clock.create(t);n.restore=restore,n.methods=Array.prototype.slice.call(arguments,typeof t=="number"?1:0),n.methods.length===0&&(n.methods=methods);for(var r=0,i=n.methods.length;r<i;r++)stubGlobal(n.methods[r],n);return n}})(typeof global!="undefined"&&typeof global!="function"?global:this),sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,Date:Date},typeof module=="object"&&typeof require=="function"&&(module.exports=sinon),typeof sinon=="undefined"&&(this.sinon={}),function(){var e=[].push;sinon.Event=function(t,n,r,i){this.initEvent(t,n,r,i)},sinon.Event.prototype={initEvent:function(e,t,n,r){this.type=e,this.bubbles=t,this.cancelable=n,this.target=r},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},sinon.EventTarget={addEventListener:function(n,r,i){this.eventListeners=this.eventListeners||{},this.eventListeners[n]=this.eventListeners[n]||[],e.call(this.eventListeners[n],r)},removeEventListener:function(t,n,r){var i=this.eventListeners&&this.eventListeners[t]||[];for(var s=0,o=i.length;s<o;++s)if(i[s]==n)return i.splice(s,1)},dispatchEvent:function(t){var n=t.type,r=this.eventListeners&&this.eventListeners[n]||[];for(var i=0;i<r.length;i++)typeof r[i]=="function"?r[i].call(this,t):r[i].handleEvent(t);return!!t.defaultPrevented}}}(),typeof sinon=="undefined"&&(this.sinon={}),sinon.xhr={XMLHttpRequest:this.XMLHttpRequest},function(e){function r(){function n(t){e.addEventListener(t,function(n){var r=e["on"+t];r&&typeof r=="function"&&r(n)})}this.readyState=r.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="";var e=this,t=["loadstart","load","abort","loadend"];for(var i=t.length-1;i>=0;i--)n(t[i]);typeof r.onCreate=="function"&&r.onCreate(this)}function i(e){if(e.readyState!==r.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function s(e,t){if(!e)return;for(var n=0,r=e.length;n<r;n+=1)t(e[n])}function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n])===!0)return!0;return!1}function f(e){if(e.readyState==r.DONE)throw new Error("Request done")}function l(e){if(e.async&&e.readyState!=r.HEADERS_RECEIVED)throw new Error("No headers received")}function c(e){if(typeof e!="string"){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var t=sinon.xhr;t.GlobalXMLHttpRequest=e.XMLHttpRequest,t.GlobalActiveXObject=e.ActiveXObject,t.supportsActiveX=typeof t.GlobalActiveXObject!="undefined",t.supportsXHR=typeof t.GlobalXMLHttpRequest!="undefined",t.workingXHR=t.supportsXHR?t.GlobalXMLHttpRequest:t.supportsActiveX?function(){return new t.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1;var n={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0},u=function(e,t,n){switch(n.length){case 0:return e[t]();case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4])}};r.filters=[],r.addFilter=function(e){this.filters.push(e)};var a=/MSIE 6/;r.defake=function(e,t){var n=new sinon.xhr.workingXHR;s(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(t){e[t]=function(){return u(n,t,arguments)}});var i=function(t){s(t,function(t){try{e[t]=n[t]}catch(r){if(!a.test(navigator.userAgent))throw r}})},o=function(){e.readyState=n.readyState,n.readyState>=r.HEADERS_RECEIVED&&i(["status","statusText"]),n.readyState>=r.LOADING&&i(["responseText"]),n.readyState===r.DONE&&i(["responseXML"]),e.onreadystatechange&&e.onreadystatechange.call(e)};if(n.addEventListener){for(var f in e.eventListeners)e.eventListeners.hasOwnProperty(f)&&s(e.eventListeners[f],function(e){n.addEventListener(f,e)});n.addEventListener("readystatechange",o)}else n.onreadystatechange=o;u(n,"open",t)},r.useFilters=!1,sinon.extend(r.prototype,sinon.EventTarget,{async:!0,open:function(t,n,i,s,u){this.method=t,this.url=n,this.async=typeof i=="boolean"?i:!0,this.username=s,this.password=u,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1;if(sinon.FakeXMLHttpRequest.useFilters===!0){var a=arguments,f=o(r.filters,function(e){return e.apply(this,a)});if(f)return sinon.FakeXMLHttpRequest.defake(this,arguments)}this.readyStateChange(r.OPENED)},readyStateChange:function(t){this.readyState=t;if(typeof this.onreadystatechange=="function")try{this.onreadystatechange()}catch(n){sinon.logError("Fake XHR onreadystatechange handler",n)}this.dispatchEvent(new sinon.Event("readystatechange"));switch(this.readyState){case r.DONE:this.dispatchEvent(new sinon.Event("load",!1,!1,this)),this.dispatchEvent(new sinon.Event("loadend",!1,!1,this))}},setRequestHeader:function(t,r){i(this);if(n[t]||/^(Sec-|Proxy-)/.test(t))throw new Error('Refused to set unsafe header "'+t+'"');this.requestHeaders[t]?this.requestHeaders[t]+=","+r:this.requestHeaders[t]=r},setResponseHeaders:function(t){this.responseHeaders={};for(var n in t)t.hasOwnProperty(n)&&(this.responseHeaders[n]=t[n]);this.async?this.readyStateChange(r.HEADERS_RECEIVED):this.readyState=r.HEADERS_RECEIVED},send:function(t){i(this);if(!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var n=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=n[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=t}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(r.OPENED),typeof this.onSend=="function"&&this.onSend(this),this.dispatchEvent(new sinon.Event("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>sinon.FakeXMLHttpRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(sinon.FakeXMLHttpRequest.DONE),this.sendFlag=!1),this.readyState=sinon.FakeXMLHttpRequest.UNSENT,this.dispatchEvent(new sinon.Event("abort",!1,!1,this)),typeof this.onerror=="function"&&this.onerror()},getResponseHeader:function(t){if(this.readyState<r.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(t))return null;t=t.toLowerCase();for(var n in this.responseHeaders)if(n.toLowerCase()==t)return this.responseHeaders[n];return null},getAllResponseHeaders:function(){if(this.readyState<r.HEADERS_RECEIVED)return"";var t="";for(var n in this.responseHeaders)this.responseHeaders.hasOwnProperty(n)&&!/^Set-Cookie2?$/i.test(n)&&(t+=n+": "+this.responseHeaders[n]+"\r\n");return t},setResponseBody:function(t){f(this),l(this),c(t);var n=this.chunkSize||10,i=0;this.responseText="";do this.async&&this.readyStateChange(r.LOADING),this.responseText+=t.substring(i,i+n),i+=n;while(i<t.length);var s=this.getResponseHeader("Content-Type");if(this.responseText&&(!s||/(text\/xml)|(application\/xml)|(\+xml)/.test(s)))try{this.responseXML=r.parseXML(this.responseText)}catch(o){}this.async?this.readyStateChange(r.DONE):this.readyState=r.DONE},respond:function(t,n,i){this.setResponseHeaders(n||{}),this.status=typeof t=="number"?t:200,this.statusText=r.statusCodes[this.status],this.setResponseBody(i||""),typeof this.onload=="function"&&this.onload()}}),sinon.extend(r,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),r.parseXML=function(t){var n;if(typeof DOMParser!="undefined"){var r=new DOMParser;n=r.parseFromString(t,"text/xml")}else n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t);return n},r.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},sinon.useFakeXMLHttpRequest=function(){return sinon.FakeXMLHttpRequest.restore=function(r){t.supportsXHR&&(e.XMLHttpRequest=t.GlobalXMLHttpRequest),t.supportsActiveX&&(e.ActiveXObject=t.GlobalActiveXObject),delete sinon.FakeXMLHttpRequest.restore,r!==!0&&delete sinon.FakeXMLHttpRequest.onCreate},t.supportsXHR&&(e.XMLHttpRequest=sinon.FakeXMLHttpRequest),t.supportsActiveX&&(e.ActiveXObject=function(n){return n=="Microsoft.XMLHTTP"||/^Msxml2\.XMLHTTP/i.test(n)?new sinon.FakeXMLHttpRequest:new t.GlobalActiveXObject(n)}),sinon.FakeXMLHttpRequest},sinon.FakeXMLHttpRequest=r}(this),typeof module=="object"&&typeof require=="function"&&(module.exports=sinon);if(typeof sinon=="undefined")var sinon={};sinon.fakeServer=function(){function t(){}function n(e){return t.prototype=e,new t}function r(e){var t=e;Object.prototype.toString.call(e)!="[object Array]"&&(t=[200,{},e]);if(typeof t[2]!="string")throw new TypeError("Fake server response body should be string, but was "+typeof t[2]);return t}function o(e,t,n){var r=e.method,i=!r||r.toLowerCase()==t.toLowerCase(),s=e.url,o=!s||s==n||typeof s.test=="function"&&s.test(n);return i&&o}function u(e,t){var n=this.getHTTPMethod(t),r=t.url;if(!/^https?:\/\//.test(r)||s.test(r))r=r.replace(s,"");if(o(e,this.getHTTPMethod(t),r)){if(typeof e.response=="function"){var i=e.url,u=[t].concat(i?r.match(i).slice(1):[]);return e.response.apply(e,u)}return!0}return!1}function a(e,t){var n;n="Request:\n"+sinon.format(t)+"\n\n",n+="Response:\n"+sinon.format(e)+"\n\n",sinon.log(n)}var e=[].push,i=typeof window!="undefined"?window.location:{},s=new RegExp("^"+i.protocol+"//"+i.host);return{create:function(){var e=n(this);return this.xhr=sinon.useFakeXMLHttpRequest(),e.requests=[],this.xhr.onCreate=function(t){e.addRequest(t)},e},addRequest:function(n){var r=this;e.call(this.requests,n),n.onSend=function(){r.handleRequest(this)},this.autoRespond&&!this.responding&&(setTimeout(function(){r.responding=!1,r.respond()},this.autoRespondAfter||10),this.responding=!0)},getHTTPMethod:function(t){if(this.fakeHTTPMethods&&/post/i.test(t.method)){var n=(t.requestBody||"").match(/_method=([^\b;]+)/);return n?n[1]:t.method}return t.method},handleRequest:function(n){n.async?(this.queue||(this.queue=[]),e.call(this.queue,n)):this.processRequest(n)},respondWith:function(n,i,s){if(arguments.length==1&&typeof n!="function"){this.response=r(n);return}this.responses||(this.responses=[]),arguments.length==1&&(s=n,i=n=null),arguments.length==2&&(s=i,i=n,n=null),e.call(this.responses,{method:n,url:i,response:typeof s=="function"?s:r(s)})},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);var t=this.queue||[],n;while(n=t.shift())this.processRequest(n)},processRequest:function(t){try{if(t.aborted)return;var n=this.response||[404,{},""];if(this.responses)for(var r=0,i=this.responses.length;r<i;r++)if(u.call(this,this.responses[r],t)){n=this.responses[r].response;break}t.readyState!=4&&(a(n,t),t.respond(n[0],n[1],n[2]))}catch(s){sinon.logError("Fake server request processing",s)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}(),typeof module=="object"&&typeof require=="function"&&(module.exports=sinon),function(){function e(){}e.prototype=sinon.fakeServer,sinon.fakeServerWithClock=new e,sinon.fakeServerWithClock.addRequest=function(t){if(t.async){typeof setTimeout.clock=="object"?this.clock=setTimeout.clock:(this.clock=sinon.useFakeTimers(),this.resetClock=!0);if(!this.longestTimeout){var n=this.clock.setTimeout,r=this.clock.setInterval,i=this;this.clock.setTimeout=function(e,t){return i.longestTimeout=Math.max(t,i.longestTimeout||0),n.apply(this,arguments)},this.clock.setInterval=function(e,t){return i.longestTimeout=Math.max(t,i.longestTimeout||0),r.apply(this,arguments)}}}return sinon.fakeServer.addRequest.call(this,t)},sinon.fakeServerWithClock.respond=function(){var t=sinon.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),t},sinon.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),sinon.fakeServer.restore.apply(this,arguments)}}();if(typeof module=="object"&&typeof require=="function"){var sinon=require("../sinon");sinon.extend(sinon,require("./util/fake_timers"))}(function(){function t(t,n,r,i){if(!i)return;n.injectInto?n.injectInto[r]=i:e.call(t.args,i)}function n(e){var t=sinon.create(sinon.sandbox);return e.useFakeServer&&(typeof e.useFakeServer=="object"&&(t.serverPrototype=e.useFakeServer),t.useFakeServer()),e.useFakeTimers&&(typeof e.useFakeTimers=="object"?t.useFakeTimers.apply(t,e.useFakeTimers):t.useFakeTimers()),t}var e=[].push;sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function(){return this.clock=sinon.useFakeTimers.apply(sinon,arguments),this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function(){var t=this.serverPrototype||sinon.fakeServer;return!t||!t.create?null:(this.server=t.create(),this.add(this.server))},inject:function(e){return sinon.collection.inject.call(this,e),this.clock&&(e.clock=this.clock),this.server&&(e.server=this.server,e.requests=this.server.requests),e},create:function(e){if(!e)return sinon.create(sinon.sandbox);var r=n(e);r.args=r.args||[];var i,s,o=r.inject({});if(e.properties)for(var u=0,a=e.properties.length;u<a;u++)i=e.properties[u],s=o[i]||i=="sandbox"&&r,t(r,e,i,s);else t(r,e,"sandbox",s);return r}}),sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer,typeof module=="object"&&typeof require=="function"&&(module.exports=sinon.sandbox)})(),function(e){function n(t){var n=typeof t;if(n!="function")throw new TypeError("sinon.test needs to wrap a test function, got "+n);return function(){var n=e.getConfig(e.config);n.injectInto=n.injectIntoThis&&this||n.injectInto;var r=e.sandbox.create(n),i,s,o=Array.prototype.slice.call(arguments).concat(r.args);try{s=t.apply(this,o)}catch(u){i=u}if(typeof i!="undefined")throw r.restore(),i;return r.verifyAndRestore(),s}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;n.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t?module.exports=n:e.test=n}(typeof sinon=="object"&&sinon||null),function(e){function n(e,t,n){return function(){t&&t.apply(this,arguments);var r,i;try{i=e.apply(this,arguments)}catch(s){r=s}n&&n.apply(this,arguments);if(r)throw r;return i}}function r(t,r){if(!t||typeof t!="object")throw new TypeError("sinon.testCase needs an object with test functions");r=r||"test";var i=new RegExp("^"+r),s={},o,u,a,f=t.setUp,l=t.tearDown;for(o in t)if(t.hasOwnProperty(o)){u=t[o];if(/^(setUp|tearDown)$/.test(o))continue;if(typeof u=="function"&&i.test(o)){a=u;if(f||l)a=n(u,f,l);s[o]=e.test(a)}else s[o]=t[o]}return s}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e||!Object.prototype.hasOwnProperty)return;t?module.exports=r:e.testCase=r}(typeof sinon=="object"&&sinon||null),function(e,t){function s(){var e;for(var t=0,n=arguments.length;t<n;++t)e=arguments[t],e||i.fail("fake is not a spy"),typeof e!="function"&&i.fail(e+" is not a function"),typeof e.getCall!="function"&&i.fail(e+" is not stubbed")}function o(e,n){e=e||t;var r=e.fail||i.fail;r.call(e,n)}function u(e,t,n){arguments.length==2&&(n=t,t=e),i[e]=function(u){s(u);var a=r.call(arguments,1),f=!1;typeof t=="function"?f=!t(u):f=typeof u[t]=="function"?!u[t].apply(u,a):!u[t],f?o(this,u.printf.apply(u,[n].concat(a))):i.pass(e)}}function a(e,t){return!e||/^fail/.test(t)?t:e+t.slice(0,1).toUpperCase()+t.slice(1)}var n=typeof module=="object"&&typeof require=="function",r=Array.prototype.slice,i;!e&&n&&(e=require("../sinon"));if(!e)return;i={failException:"AssertError",fail:function(t){var n=new Error(t);throw n.name=this.failException||i.failException,n},pass:function(t){},callOrder:function(){s.apply(null,arguments);var n="",u="";if(!e.calledInOrder(arguments)){try{n=[].join.call(arguments,", ");var a=r.call(arguments),f=a.length;while(f)a[--f].called||a.splice(f,1);u=e.orderByFirstCall(a).join(", ")}catch(l){}o(this,"expected "+n+" to be "+"called in order but were called as "+u)}else i.pass("callOrder")},callCount:function(n,r){s(n);if(n.callCount!=r){var u="expected %n to be called "+e.timesInWords(r)+" but was called %c%C";o(this,n.printf(u))}else i.pass("callCount")},expose:function(t,n){if(!t)throw new TypeError("target is null or undefined");var r=n||{},i=typeof r.prefix=="undefined"&&"assert"||r.prefix,s=typeof r.includeFail=="undefined"||!!r.includeFail;for(var o in this)o!="export"&&(s||!/^(fail)/.test(o))&&(t[a(i,o)]=this[o]);return t}},u("called","expected %n to have been called at least once but was never called"),u("notCalled",function(e){return!e.called},"expected %n to not have been called but was called %c%C"),u("calledOnce","expected %n to be called once but was called %c%C"),u("calledTwice","expected %n to be called twice but was called %c%C"),u("calledThrice","expected %n to be called thrice but was called %c%C"),u("calledOn","expected %n to be called with %1 as this but was called with %t"),u("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),u("calledWithNew","expected %n to be called with new"),u("alwaysCalledWithNew","expected %n to always be called with new"),u("calledWith","expected %n to be called with arguments %*%C"),u("calledWithMatch","expected %n to be called with match %*%C"),u("alwaysCalledWith","expected %n to always be called with arguments %*%C"),u("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),u("calledWithExactly","expected %n to be called with exact arguments %*%C"),u("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),u("neverCalledWith","expected %n to never be called with arguments %*%C"),u("neverCalledWithMatch","expected %n to never be called with match %*%C"),u("threw","%n did not throw exception%C"),u("alwaysThrew","%n did not always throw exception%C"),n?module.exports=i:e.assert=i}(typeof sinon=="object"&&sinon||null,typeof window!="undefined"?window:typeof self!="undefined"?self:global),define("sinon",function(e){return function(){var t,n;return t||e.window.sinon}}(this)),define("src/both/general_test_helper",["./core","util","winston","sinon"],function(e,t,n,r){function i(e){e=e||{},this.showLogs=e.showLogs,this.winston=e.winston||n,this.reset()}return i.prototype.checkError=function(e,n,r){return n?(n&&this.showLogs&&this.winston.error(t.inspect(n)+" - "+e),r&&r(n),!0):!1},i.prototype.reset=function(){this.checkError=r.spy(i.prototype.checkError)},i}),define("src/both/winston_test_helper",["./core","sinon","util","winston"],function(e,t,n,r){function i(e){e=e||{},this.showLogs=e.showLogs,this.winston=e.winston||r,this.console=e.console||console,this.reset()}var s=["verbose","info","debug","warn","error"];return i.prototype.reset=function(){var e=this,n=s.length;for(var r=0;r<n;r+=1){var i=s[r];this[i]=t.spy(function(t){e.showLogs&&e.winston[i](t)})}},i}),define("src/client/mocha_reporter",[],function(){var e=function(e){var t=[],n=function(e,n,r){var i={name:e,object:n,error:r};return t.push(i)};e.on("start",function(){n("start")});var r=function(e){var t={root:e.root,title:e.title};return t};e.on("suite",function(e){n("suite",r(e))}),e.on("suite end",function(e){n("suite end",r(e))});var i=function(e){var t={title:e.title,fullTitle:e.fullTitle(),duration:e.duration};return t};e.on("test end",function(e){n("test end",i(e))}),e.on("pass",function(e){n("pass",i(e))});var s=function(e){var t={message:e.message,stack:e.stack||e.message,actual:e.actual,expected:e.expected};return t};e.on("fail",function(e,t){n("fail",i(e),s(t))}),e.on("end",function(){n("end"),window.results=t}),e.on("pending",function(e){n("pending",i(e))})};return e}),function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');return r.exports||(r.exports={},r.call(r.exports,r,r.exports,e.relative(n))),r.exports}function c(){var e=(new t).getTime();while(f.length&&(new t).getTime()-e<100)f.shift()();f.length?l=n(c,0):l=null}e.modules={},e.resolve=function(t){var n=t,r=t+".js",i=t+"/index.js";return e.modules[r]&&r||e.modules[i]&&i||n},e.register=function(t,n){e.modules[t]=n},e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),i=n.split("/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return e(r.join("/"))}},e.register("browser/debug.js",function(e,t,n){e.exports=function(e){return function(){}}}),e.register("browser/diff.js",function(e,t,n){var r=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){var t=[];for(var n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t}function n(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}var r=function(e){this.ignoreWhitespace=e};r.prototype={diff:function(t,n){if(n===t)return[{value:n}];if(!n)return[{value:t,removed:!0}];if(!t)return[{value:n,added:!0}];n=this.tokenize(n),t=this.tokenize(t);var r=n.length,i=t.length,s=r+i,o=[{newPos:-1,components:[]}],u=this.extractCommon(o[0],n,t,0);if(o[0].newPos+1>=r&&u+1>=i)return o[0].components;for(var a=1;a<=s;a++)for(var f=-1*a;f<=a;f+=2){var l,c=o[f-1],h=o[f+1];u=(h?h.newPos:0)-f,c&&(o[f-1]=undefined);var p=c&&c.newPos+1<r,d=h&&0<=u&&u<i;if(!p&&!d){o[f]=undefined;continue}!p||d&&c.newPos<h.newPos?(l=e(h),this.pushComponent(l.components,t[u],undefined,!0)):(l=e(c),l.newPos++,this.pushComponent(l.components,n[l.newPos],!0,undefined));var u=this.extractCommon(l,n,t,f);if(l.newPos+1>=r&&u+1>=i)return l.components;o[f]=l}},pushComponent:function(e,t,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={value:this.join(i.value,t),added:n,removed:r}:e.push({value:t,added:n,removed:r})},extractCommon:function(e,t,n,r){var i=t.length,s=n.length,o=e.newPos,u=o-r;while(o+1<i&&u+1<s&&this.equals(t[o+1],n[u+1]))o++,u++,this.pushComponent(e.components,t[o],undefined,undefined);return e.newPos=o,u},equals:function(e,t){var n=/\S/;return this.ignoreWhitespace&&!n.test(e)&&!n.test(t)?!0:e===t},join:function(e,t){return e+t},tokenize:function(e){return e}};var i=new r,s=new r(!0),o=new r;s.tokenize=o.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var u=new r(!0);u.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var a=new r;return a.tokenize=function(e){return e.split(/^/m)},{Diff:r,diffChars:function(e,t){return i.diff(e,t)},diffWords:function(e,t){return s.diff(e,t)},diffWordsWithSpace:function(e,t){return o.diff(e,t)},diffLines:function(e,t){return a.diff(e,t)},diffCss:function(e,t){return u.diff(e,t)},createPatch:function(e,t,n,r,i){function u(e){return e.map(function(e){return" "+e})}function f(e,t,n){var r=o[o.length-2],i=t===o.length-2,s=t===o.length-3&&(n.added!==r.added||n.removed!==r.removed);!/\n$/.test(n.value)&&(i||s)&&e.push("\\ No newline at end of file")}var s=[];s.push("Index: "+e),s.push("==================================================================="),s.push("--- "+e+(typeof r=="undefined"?"":"	"+r)),s.push("+++ "+e+(typeof i=="undefined"?"":"	"+i));var o=a.diff(t,n);o[o.length-1].value||o.pop(),o.push({value:"",lines:[]});var l=0,c=0,h=[],p=1,d=1;for(var v=0;v<o.length;v++){var m=o[v],g=m.lines||m.value.replace(/\n$/,"").split("\n");m.lines=g;if(m.added||m.removed){if(!l){var y=o[v-1];l=p,c=d,y&&(h=u(y.lines.slice(-4)),l-=h.length,c-=h.length)}h.push.apply(h,g.map(function(e){return(m.added?"+":"-")+e})),f(h,v,m),m.added?d+=g.length:p+=g.length}else{if(l)if(g.length<=8&&v<o.length-2)h.push.apply(h,u(g));else{var b=Math.min(g.length,4);s.push("@@ -"+l+","+(p-l+b)+" +"+c+","+(d-c+b)+" @@"),s.push.apply(s,h),s.push.apply(s,u(g.slice(0,b))),g.length<=4&&f(s,v,m),l=0,c=0,h=[]}p+=g.length,d+=g.length}}return s.join("\n")+"\n"},applyPatch:function(e,t){var n=t.split("\n"),r=[],i=!1,s=!1;for(var o=n[0][0]==="I"?4:0;o<n.length;o++)if(n[o][0]==="@"){var u=n[o].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);r.unshift({start:u[3],oldlength:u[2],oldlines:[],newlength:u[4],newlines:[]})}else n[o][0]==="+"?r[0].newlines.push(n[o].substr(1)):n[o][0]==="-"?r[0].oldlines.push(n[o].substr(1)):n[o][0]===" "?(r[0].newlines.push(n[o].substr(1)),r[0].oldlines.push(n[o].substr(1))):n[o][0]==="\\"&&(n[o-1][0]==="+"?i=!0:n[o-1][0]==="-"&&(s=!0));var a=e.split("\n");for(var o=r.length-1;o>=0;o--){var f=r[o];for(var l=0;l<f.oldlength;l++)if(a[f.start-1+l]!==f.oldlines[l])return!1;Array.prototype.splice.apply(a,[f.start-1,+f.oldlength].concat(f.newlines))}if(i)while(!a[a.length-1])a.pop();else s&&a.push("");return a.join("\n")},convertChangesToXML:function(e){var t=[];for(var r=0;r<e.length;r++){var i=e[r];i.added?t.push("<ins>"):i.removed&&t.push("<del>"),t.push(n(i.value)),i.added?t.push("</ins>"):i.removed&&t.push("</del>")}return t.join("")},convertChangesToDMP:function(e){var t=[],n;for(var r=0;r<e.length;r++)n=e[r],t.push([n.added?1:n.removed?-1:0,n.value]);return t}}}();typeof e!="undefined"&&(e.exports=r)}),e.register("browser/events.js",function(e,t,n){function r(e){return"[object Array]"=={}.toString.call(e)}function i(){}t.EventEmitter=i,i.prototype.on=function(e,t){return this.$events||(this.$events={}),this.$events[e]?r(this.$events[e])?this.$events[e].push(t):this.$events[e]=[this.$events[e],t]:this.$events[e]=t,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}var n=this;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){if(this.$events&&this.$events[e]){var n=this.$events[e];if(r(n)){var i=-1;for(var s=0,o=n.length;s<o;s++)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;n.splice(i,1),n.length||delete this.$events[e]}else(n===t||n.listener&&n.listener===t)&&delete this.$events[e]}return this},i.prototype.removeAllListeners=function(e){return e===undefined?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},i.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),r(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},i.prototype.emit=function(e){if(!this.$events)return!1;var t=this.$events[e];if(!t)return!1;var n=[].slice.call(arguments,1);if("function"==typeof t)t.apply(this,n);else{if(!r(t))return!1;var i=t.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,n)}return!0}}),e.register("browser/fs.js",function(e,t,n){}),e.register("browser/path.js",function(e,t,n){}),e.register("browser/progress.js",function(e,t,n){function r(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}e.exports=r,r.prototype.size=function(e){return this._size=e,this},r.prototype.text=function(e){return this._text=e,this},r.prototype.fontSize=function(e){return this._fontSize=e,this},r.prototype.font=function(e){return this._font=e,this},r.prototype.update=function(e){return this.percent=e,this},r.prototype.draw=function(e){var t=Math.min(this.percent,100),n=this._size,r=n/2,i=r,s=r,o=r-1,u=this._fontSize;e.font=u+"px "+this._font;var a=Math.PI*2*(t/100);e.clearRect(0,0,n,n),e.strokeStyle="#9f9f9f",e.beginPath(),e.arc(i,s,o,0,a,!1),e.stroke(),e.strokeStyle="#eee",e.beginPath(),e.arc(i,s,o-1,0,a,!0),e.stroke();var f=this._text||(t|0)+"%",l=e.measureText(f).width;return e.fillText(f,i-l/2+1,s+u/2-1),this}}),e.register("browser/tty.js",function(e,t,n){t.isatty=function(){return!0},t.getWindowSize=function(){return"innerHeight"in global?[global.innerHeight,global.innerWidth]:[640,480]}}),e.register("context.js",function(e,t,n){function r(){}e.exports=r,r.prototype.runnable=function(e){return 0==arguments.length?this._runnable:(this.test=this._runnable=e,this)},r.prototype.timeout=function(e){return this.runnable().timeout(e),this},r.prototype.slow=function(e){return this.runnable().slow(e),this},r.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_runnable"==e)return;if("test"==e)return;return t},2)}}),e.register("hook.js",function(e,t,n){function i(e,t){r.call(this,e,t),this.type="hook"}function s(){}var r=n("./runnable");e.exports=i,s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i,i.prototype.error=function(e){if(0==arguments.length){var e=this._error;return this._error=null,e}this._error=e}}),e.register("interfaces/bdd.js",function(e,t,n){var r=n("../suite"),i=n("../test"),s=n("../utils");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,o){e.before=function(e){t[0].beforeAll(e)},e.after=function(e){t[0].afterAll(e)},e.beforeEach=function(e){t[0].beforeEach(e)},e.afterEach=function(e){t[0].afterEach(e)},e.describe=e.context=function(e,n){var i=r.create(t[0],e);return t.unshift(i),n.call(i),t.shift(),i},e.xdescribe=e.xcontext=e.describe.skip=function(e,n){var i=r.create(t[0],e);i.pending=!0,t.unshift(i),n.call(i),t.shift()},e.describe.only=function(t,n){var r=e.describe(t,n);return o.grep(r.fullTitle()),r},e.it=e.specify=function(e,n){var r=t[0];if(r.pending)var n=null;var s=new i(e,n);return r.addTest(s),s},e.it.only=function(t,n){var r=e.it(t,n),i="^"+s.escapeRegexp(r.fullTitle())+"$";return o.grep(new RegExp(i)),r},e.xit=e.xspecify=e.it.skip=function(t){e.it(t)}})}}),e.register("interfaces/exports.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){function n(e){var s;for(var o in e)if("function"==typeof e[o]){var u=e[o];switch(o){case"before":t[0].beforeAll(u);break;case"after":t[0].afterAll(u);break;case"beforeEach":t[0].beforeEach(u);break;case"afterEach":t[0].afterEach(u);break;default:t[0].addTest(new i(o,u))}}else{var s=r.create(t[0],o);t.unshift(s),n(e[o]),t.shift()}}var t=[e];e.on("require",n)}}),e.register("interfaces/index.js",function(e,t,n){t.bdd=n("./bdd"),t.tdd=n("./tdd"),t.qunit=n("./qunit"),t.exports=n("./exports")}),e.register("interfaces/qunit.js",function(e,t,n){var r=n("../suite"),i=n("../test"),s=n("../utils");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,o){e.before=function(e){t[0].beforeAll(e)},e.after=function(e){t[0].afterAll(e)},e.beforeEach=function(e){t[0].beforeEach(e)},e.afterEach=function(e){t[0].afterEach(e)},e.suite=function(e){t.length>1&&t.shift();var n=r.create(t[0],e);return t.unshift(n),n},e.suite.only=function(t,n){var r=e.suite(t,n);o.grep(r.fullTitle())},e.test=function(e,n){var r=new i(e,n);return t[0].addTest(r),r},e.test.only=function(t,n){var r=e.test(t,n),i="^"+s.escapeRegexp(r.fullTitle())+"$";o.grep(new RegExp(i))},e.test.skip=function(t){e.test(t)}})}}),e.register("interfaces/tdd.js",function(e,t,n){var r=n("../suite"),i=n("../test"),s=n("../utils");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,o){e.setup=function(e){t[0].beforeEach(e)},e.teardown=function(e){t[0].afterEach(e)},e.suiteSetup=function(e){t[0].beforeAll(e)},e.suiteTeardown=function(e){t[0].afterAll(e)},e.suite=function(e,n){var i=r.create(t[0],e);return t.unshift(i),n.call(i),t.shift(),i},e.suite.skip=function(e,n){var i=r.create(t[0],e);i.pending=!0,t.unshift(i),n.call(i),t.shift()},e.suite.only=function(t,n){var r=e.suite(t,n);o.grep(r.fullTitle())},e.test=function(e,n){var r=t[0];if(r.pending)var n=null;var s=new i(e,n);return r.addTest(s),s},e.test.only=function(t,n){var r=e.test(t,n),i="^"+s.escapeRegexp(r.fullTitle())+"$";o.grep(new RegExp(i))},e.test.skip=function(t){e.test(t)}})}}),e.register("mocha.js",function(e,t,n){function s(e){return __dirname+"/../images/"+e+".png"}function o(e){e=e||{},this.files=[],this.options=e,this.grep(e.grep),this.suite=new t.Suite("",new t.Context),this.ui(e.ui),this.bail(e.bail),this.reporter(e.reporter),null!=e.timeout&&this.timeout(e.timeout),this.useColors(e.useColors),e.slow&&this.slow(e.slow)}var r=n("browser/path"),i=n("./utils");t=e.exports=o,t.utils=i,t.interfaces=n("./interfaces"),t.reporters=n("./reporters"),t.Runnable=n("./runnable"),t.Context=n("./context"),t.Runner=n("./runner"),t.Suite=n("./suite"),t.Hook=n("./hook"),t.Test=n("./test"),o.prototype.bail=function(e){return 0==arguments.length&&(e=!0),this.suite.bail(e),this},o.prototype.addFile=function(e){return this.files.push(e),this},o.prototype.reporter=function(e){if("function"==typeof e)this._reporter=e;else{e=e||"dot";var t;try{t=n("./reporters/"+e)}catch(r){}if(!t)try{t=n(e)}catch(r){}!t&&e==="teamcity"&&console.warn("The Teamcity reporter was moved to a package named mocha-teamcity-reporter (https://npmjs.org/package/mocha-teamcity-reporter).");if(!t)throw new Error('invalid reporter "'+e+'"');this._reporter=t}return this},o.prototype.ui=function(e){e=e||"bdd",this._ui=t.interfaces[e];if(!this._ui)try{this._ui=n(e)}catch(r){}if(!this._ui)throw new Error('invalid interface "'+e+'"');return this._ui=this._ui(this.suite),this},o.prototype.loadFiles=function(e){var t=this,i=this.suite,s=this.files.length;this.files.forEach(function(o){o=r.resolve(o),i.emit("pre-require",global,o,t),i.emit("require",n(o),o,t),i.emit("post-require",global,o,t),--s||e&&e()})},o.prototype._growl=function(e,t){var r=n("growl");e.on("end",function(){var n=t.stats;if(n.failures){var i=n.failures+" of "+e.total+" tests failed";r(i,{name:"mocha",title:"Failed",image:s("error")})}else r(n.passes+" tests passed in "+n.duration+"ms",{name:"mocha",title:"Passed",image:s("ok")})})},o.prototype.grep=function(e){return this.options.grep="string"==typeof e?new RegExp(i.escapeRegexp(e)):e,this},o.prototype.invert=function(){return this.options.invert=!0,this},o.prototype.ignoreLeaks=function(e){return this.options.ignoreLeaks=!!e,this},o.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},o.prototype.growl=function(){return this.options.growl=!0,this},o.prototype.globals=function(e){return this.options.globals=(this.options.globals||[]).concat(e),this},o.prototype.useColors=function(e){return this.options.useColors=arguments.length&&e!=undefined?e:!0,this},o.prototype.timeout=function(e){return this.suite.timeout(e),this},o.prototype.slow=function(e){return this.suite.slow(e),this},o.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},o.prototype.run=function(e){this.files.length&&this.loadFiles();var n=this.suite,r=this.options,i=new t.Runner(n),s=new this._reporter(i);return i.ignoreLeaks=!1!==r.ignoreLeaks,i.asyncOnly=r.asyncOnly,r.grep&&i.grep(r.grep,r.invert),r.globals&&i.globals(r.globals),r.growl&&this._growl(i,s),t.reporters.Base.useColors=r.useColors,i.run(e)}}),e.register("ms.js",function(e,t,n){function a(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]),a=(t[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"y":return n*u;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"h":return n*s;case"minutes":case"minute":case"m":return n*i;case"seconds":case"second":case"s":return n*r;case"ms":return n}}function f(e){return e>=o?Math.round(e/o)+"d":e>=s?Math.round(e/s)+"h":e>=i?Math.round(e/i)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}function l(e){return c(e,o,"day")||c(e,s,"hour")||c(e,i,"minute")||c(e,r,"second")||e+" ms"}function c(e,t,n){if(e<t)return;return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var r=1e3,i=r*60,s=i*60,o=s*24,u=o*365.25;e.exports=function(e,t){return t=t||{},"string"==typeof e?a(e):t.long?l(e):f(e)}}),e.register("reporters/base.js",function(e,t,n){function d(e){var t=this,n=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},r=this.failures=[];if(!e)return;this.runner=e,e.stats=n,e.on("start",function(){n.start=new u}),e.on("suite",function(e){n.suites=n.suites||0,e.root||n.suites++}),e.on("test end",function(e){n.tests=n.tests||0,n.tests++}),e.on("pass",function(e){n.passes=n.passes||0;var t=e.slow()/2;e.speed=e.duration>e.slow()?"slow":e.duration>t?"medium":"fast",n.passes++}),e.on("fail",function(e,t){n.failures=n.failures||0,n.failures++,e.err=t,r.push(e)}),e.on("end",function(){n.end=new u,n.duration=new u-n.start}),e.on("pending",function(){n.pending++})}function v(e,t){return e=String(e),Array(t-e.length+1).join(" ")+e}function m(e,t){var n=y(e,"WordsWithSpace",t),r=n.split("\n");if(r.length>4){var i=String(r.length).length;n=r.map(function(e,t){return v(++t,i)+" |"+" "+e}).join("\n")}return n="\n"+p("diff removed","actual")+" "+p("diff added","expected")+"\n\n"+n+"\n",n=n.replace(/^/gm,"      "),n}function g(e,t){function r(e){return t&&(e=b(e)),e[0]==="+"?n+w("diff added",e):e[0]==="-"?n+w("diff removed",e):e.match(/\@\@/)?null:e.match(/\\ No newline/)?null:n+e}function s(e){return e!=null}var n="      ";msg=i.createPatch("string",e.actual,e.expected);var o=msg.split("\n").splice(4);return"\n      "+w("diff added","+ expected")+" "+w("diff removed","- actual")+"\n\n"+o.map(r).filter(s).join("\n")}function y(e,t,n){var r=n?b(e.actual):e.actual,s=n?b(e.expected):e.expected;return i["diff"+t](r,s).map(function(e){return e.added?w("diff added",e.value):e.removed?w("diff removed",e.value):e.value}).join("")}function b(e){return e.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}function w(e,t){return t.split("\n").map(function(t){return p(e,t)}).join("\n")}function E(e){return e instanceof RegExp?e.toString():JSON.stringify(e,null,2)}function S(e,t){return e=Object.prototype.toString.call(e),t=Object.prototype.toString.call(t),e==t}var r=n("browser/tty"),i=n("browser/diff"),s=n("../ms"),u=global.Date,a=global.setTimeout,f=global.setInterval,l=global.clearTimeout,c=global.clearInterval,h=r.isatty(1)&&r.isatty(2);t=e.exports=d,t.useColors=h||o.env.MOCHA_COLORS!==undefined,t.inlineDiffs=!1,t.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41},t.symbols={ok:"✓",err:"✖",dot:"․"},"win32"==o.platform&&(t.symbols.ok="√",t.symbols.err="×",t.symbols.dot=".");var p=t.color=function(e,n){return t.useColors?"["+t.colors[e]+"m"+n+"[0m":n};t.window={width:h?o.stdout.getWindowSize?o.stdout.getWindowSize(1)[0]:r.getWindowSize()[1]:75},t.cursor={hide:function(){h&&o.stdout.write("[?25l")},show:function(){h&&o.stdout.write("[?25h")},deleteLine:function(){h&&o.stdout.write("[2K")},beginningOfLine:function(){h&&o.stdout.write("[0G")},CR:function(){h?(t.cursor.deleteLine(),t.cursor.beginningOfLine()):o.stdout.write("\n")}},t.list=function(e){console.error(),e.forEach(function(e,n){var r=p("error title","  %s) %s:\n")+p("error message","     %s")+p("error stack","\n%s\n"),i=e.err,s=i.message||"",o=i.stack||s,u=o.indexOf(s)+s.length,a=o.slice(0,u),f=i.actual,l=i.expected,c=!0;i.uncaught&&(a="Uncaught "+a),i.showDiff&&S(f,l)&&(c=!1,i.actual=f=E(f),i.expected=l=E(l));if("string"==typeof f&&"string"==typeof l){r=p("error title","  %s) %s:\n%s")+p("error stack","\n%s\n");var h=s.match(/^([^:]+): expected/);a=h?"\n      "+p("error message",h[1]):"",t.inlineDiffs?a+=m(i,c):a+=g(i,c)}o=o.slice(u?u+1:u).replace(/^/gm,"  "),console.error(r,n+1,e.fullTitle(),a,o)})},d.prototype.epilogue=function(){var e=this.stats,t,n;console.log(),n=p("bright pass"," ")+p("green"," %d passing")+p("light"," (%s)"),console.log(n,e.passes||0,s(e.duration)),e.pending&&(n=p("pending"," ")+p("pending"," %d pending"),console.log(n,e.pending)),e.failures&&(n=p("fail","  %d failing"),console.error(n,e.failures),d.list(this.failures),console.error()),console.log()}}),e.register("reporters/doc.js",function(e,t,n){function s(e){function u(){return Array(o).join("  ")}r.call(this,e);var t=this,n=this.stats,s=e.total,o=2;e.on("suite",function(e){if(e.root)return;++o,console.log('%s<section class="suite">',u()),++o,console.log("%s<h1>%s</h1>",u(),i.escape(e.title)),console.log("%s<dl>",u())}),e.on("suite end",function(e){if(e.root)return;console.log("%s</dl>",u()),--o,console.log("%s</section>",u()),--o}),e.on("pass",function(e){console.log("%s  <dt>%s</dt>",u(),i.escape(e.title));var t=i.escape(i.clean(e.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",u(),t)})}var r=n("./base"),i=n("../utils");t=e.exports=s}),e.register("reporters/dot.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,s=r.window.width*.75|0,u=0;e.on("start",function(){o.stdout.write("\n  ")}),e.on("pending",function(e){o.stdout.write(i("pending",r.symbols.dot))}),e.on("pass",function(e){++u%s==0&&o.stdout.write("\n  "),"slow"==e.speed?o.stdout.write(i("bright yellow",r.symbols.dot)):o.stdout.write(i(e.speed,r.symbols.dot))}),e.on("fail",function(e,t){++u%s==0&&o.stdout.write("\n  "),o.stdout.write(i("fail",r.symbols.dot))}),e.on("end",function(){console.log(),t.epilogue()})}function u(){}var r=n("./base"),i=r.color;t=e.exports=s,u.prototype=r.prototype,s.prototype=new u,s.prototype.constructor=s}),e.register("reporters/html-cov.js",function(e,t,n){function s(e){var t=n("jade"),s=__dirname+"/templates/coverage.jade",a=i.readFileSync(s,"utf8"),f=t.compile(a,{filename:s}),l=this;r.call(this,e,!1),e.on("end",function(){o.stdout.write(f({cov:l.cov,coverageClass:u}))})}function u(e){return e>=75?"high":e>=50?"medium":e>=25?"low":"terrible"}var r=n("./json-cov"),i=n("browser/fs");t=e.exports=s}),e.register("reporters/html.js",function(e,t,n){function p(e,t){r.call(this,e);var n=this,a=this.stats,f=e.total,l=v(h),c=l.getElementsByTagName("li"),p=c[1].getElementsByTagName("em")[0],w=c[1].getElementsByTagName("a")[0],E=c[2].getElementsByTagName("em")[0],S=c[2].getElementsByTagName("a")[0],x=c[3].getElementsByTagName("em")[0],T=l.getElementsByTagName("canvas")[0],N=v('<ul id="mocha-report"></ul>'),C=[N],k,L;t=t||document.getElementById("mocha");if(T.getContext){var A=window.devicePixelRatio||1;T.style.width=T.width,T.style.height=T.height,T.width*=A,T.height*=A,L=T.getContext("2d"),L.scale(A,A),k=new s}if(!t)return d("#mocha div missing, add it to your document");b(w,"click",function(){g();var e=/pass/.test(N.className)?"":" pass";N.className=N.className.replace(/fail|pass/g,"")+e,N.className.trim()&&m("test pass")}),b(S,"click",function(){g();var e=/fail/.test(N.className)?"":" fail";N.className=N.className.replace(/fail|pass/g,"")+e,N.className.trim()&&m("test fail")}),t.appendChild(l),t.appendChild(N),k&&k.size(40),e.on("suite",function(e){if(e.root)return;var t=n.suiteURL(e),r=v('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,o(e.title));C[0].appendChild(r),C.unshift(document.createElement("ul")),r.appendChild(C[0])}),e.on("suite end",function(e){if(e.root)return;C.shift()}),e.on("fail",function(t,n){"hook"==t.type&&e.emit("test end",t)}),e.on("test end",function(e){var t=a.tests/this.total*100|0;k&&k.update(t).draw(L);var r=new u-a.start;y(p,a.passes),y(E,a.failures),y(x,(r/1e3).toFixed(2));if("passed"==e.state)var s=n.testURL(e),o=v('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay">‣</a></h2></li>',e.speed,e.title,e.duration,s);else if(e.pending)var o=v('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var o=v('<li class="test fail"><h2>%e <a href="?grep=%e" class="replay">‣</a></h2></li>',e.title,encodeURIComponent(e.fullTitle())),f=e.err.stack||e.err.toString();~f.indexOf(e.err.message)||(f=e.err.message+"\n"+f),"[object Error]"==f&&(f=e.err.message),!e.err.stack&&e.err.sourceURL&&e.err.line!==undefined&&(f+="\n("+e.err.sourceURL+":"+e.err.line+")"),o.appendChild(v('<pre class="error">%e</pre>',f))}if(!e.pending){var l=o.getElementsByTagName("h2")[0];b(l,"click",function(){c.style.display="none"==c.style.display?"block":"none"});var c=v("<pre><code>%e</code></pre>",i.clean(e.fn.toString()));o.appendChild(c),c.style.display="none"}C[0]&&C[0].appendChild(o)})}function d(e){document.body.appendChild(v('<div id="mocha-error">%s</div>',e))}function v(e){var t=arguments,n=document.createElement("div"),r=1;return n.innerHTML=e.replace(/%([se])/g,function(e,n){switch(n){case"s":return String(t[r++]);case"e":return o(t[r++])}}),n.firstChild}function m(e){var t=document.getElementsByClassName("suite");for(var n=0;n<t.length;n++){var r=t[n].getElementsByClassName(e);0==r.length&&(t[n].className+=" hidden")}}function g(){var e=document.getElementsByClassName("suite hidden");for(var t=0;t<e.length;++t)e[t].className=e[t].className.replace("suite hidden","suite")}function y(e,t){e.textContent?e.textContent=t:e.innerText=t}function b(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}var r=n("./base"),i=n("../utils"),s=n("../browser/progress"),o=i.escape,u=global.Date,a=global.setTimeout,f=global.setInterval,l=global.clearTimeout,c=global.clearInterval;t=e.exports=p;var h='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>';p.prototype.suiteURL=function(e){return"?grep="+encodeURIComponent(e.fullTitle())},p.prototype.testURL=function(e){return"?grep="+encodeURIComponent(e.fullTitle())}}),e.register("reporters/index.js",function(e,t,n){t.Base=n("./base"),t.Dot=n("./dot"),t.Doc=n("./doc"),t.TAP=n("./tap"),t.JSON=n("./json"),t.HTML=n("./html"),t.List=n("./list"),t.Min=n("./min"),t.Spec=n("./spec"),t.Nyan=n("./nyan"),t.XUnit=n("./xunit"),t.Markdown=n("./markdown"),t.Progress=n("./progress"),t.Landing=n("./landing"),t.JSONCov=n("./json-cov"),t.HTMLCov=n("./html-cov"),t.JSONStream=n("./json-stream")}),e.register("reporters/json-cov.js",function(e,t,n){function i(e,t){var n=this,t=1==arguments.length?!0:t;r.call(this,e);var i=[],u=[],f=[];e.on("test end",function(e){i.push(e)}),e.on("pass",function(e){f.push(e)}),e.on("fail",function(e){u.push(e)}),e.on("end",function(){var e=global._$jscoverage||{},r=n.cov=s(e);r.stats=n.stats,r.tests=i.map(a),r.failures=u.map(a),r.passes=f.map(a);if(!t)return;o.stdout.write(JSON.stringify(r,null,2))})}function s(e){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in e){var r=u(n,e[n]);t.files.push(r),t.hits+=r.hits,t.misses+=r.misses,t.sloc+=r.sloc}return t.files.sort(function(e,t){return e.filename.localeCompare(t.filename)}),t.sloc>0&&(t.coverage=t.hits/t.sloc*100),t}function u(e,t){var n={filename:e,coverage:0,hits:0,misses:0,sloc:0,source:{}};return t.source.forEach(function(e,r){r++,t[r]===0?(n.misses++,n.sloc++):t[r]!==undefined&&(n.hits++,n.sloc++),n.source[r]={source:e,coverage:t[r]===undefined?"":t[r]}}),n.coverage=n.hits/n.sloc*100,n}function a(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base");t=e.exports=i}),e.register("reporters/json-stream.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,i=e.total;e.on("start",function(){console.log(JSON.stringify(["start",{total:i}]))}),e.on("pass",function(e){console.log(JSON.stringify(["pass",u(e)]))}),e.on("fail",function(e,t){console.log(JSON.stringify(["fail",u(e)]))}),e.on("end",function(){o.stdout.write(JSON.stringify(["end",t.stats]))})}function u(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.color;t=e.exports=s}),e.register("reporters/json.js",function(e,t,n){function u(e){var t=this;r.call(this,e);var n=[],i=[],s=[];e.on("test end",function(e){n.push(e)}),e.on("pass",function(e){s.push(e)}),e.on("fail",function(e){i.push(e)}),e.on("end",function(){var e={stats:t.stats,tests:n.map(a),failures:i.map(a),passes:s.map(a)};o.stdout.write(JSON.stringify(e,null,2))})}function a(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=u}),e.register("reporters/landing.js",function(e,t,n){function u(e){function p(){var e=Array(u).join("-");return"  "+s("runway",e)}r.call(this,e);var t=this,n=this.stats,u=r.window.width*.75|0,a=e.total,f=o.stdout,l=s("plane","✈"),c=-1,h=0;e.on("start",function(){f.write("\n  "),i.hide()}),e.on("test end",function(e){var t=-1==c?u*++h/a|0:c;"failed"==e.state&&(l=s("plane crash","✈"),c=t),f.write("[4F\n\n"),f.write(p()),f.write("\n  "),f.write(s("runway",Array(t).join("⋅"))),f.write(l),f.write(s("runway",Array(u-t).join("⋅")+"\n")),f.write(p()),f.write("[0m")}),e.on("end",function(){i.show(),console.log(),t.epilogue()})}function a(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=u,r.colors.plane=0,r.colors["plane crash"]=31,r.colors.runway=90,a.prototype=r.prototype,u.prototype=new a,u.prototype.constructor=u}),e.register("reporters/list.js",function(e,t,n){function u(e){r.call(this,e);var t=this,n=this.stats,u=0;e.on("start",function(){console.log()}),e.on("test",function(e){o.stdout.write(s("pass","    "+e.fullTitle()+": "))}),e.on("pending",function(e){var t=s("checkmark","  -")+s("pending"," %s");console.log(t,e.fullTitle())}),e.on("pass",function(e){var t=s("checkmark","  "+r.symbols.dot)+s("pass"," %s: ")+s(e.speed,"%dms");i.CR(),console.log(t,e.fullTitle(),e.duration)}),e.on("fail",function(e,t){i.CR(),console.log(s("fail","  %d) %s"),++u,e.fullTitle())}),e.on("end",t.epilogue.bind(t))}function a(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=u,a.prototype=r.prototype,u.prototype=new a,u.prototype.constructor=u}),e.register("reporters/markdown.js",function(e,t,n){function s(e){function a(e){return Array(s).join("#")+" "+e}function f(){return Array(s).join("  ")}function l(e,t){var n=t;return t=t[e.title]=t[e.title]||{suite:e},e.suites.forEach(function(e){l(e,t)}),n}function c(e,t){++t;var n="",r;for(var s in e){if("suite"==s)continue;s&&(r=" - ["+s+"](#"+i.slug(e[s].suite.fullTitle())+")\n"),s&&(n+=Array(t).join("  ")+r),n+=c(e[s],t)}return--t,n}function h(e){var t=l(e,{});return c(t,0)}r.call(this,e);var t=this,n=this.stats,s=0,u="";h(e.suite),e.on("suite",function(e){++s;var t=i.slug(e.fullTitle());u+='<a name="'+t+'"></a>'+"\n",u+=a(e.title)+"\n"}),e.on("suite end",function(e){--s}),e.on("pass",function(e){var t=i.clean(e.fn.toString());u+=e.title+".\n",u+="\n```js\n",u+=t+"\n",u+="```\n\n"}),e.on("end",function(){o.stdout.write("# TOC\n"),o.stdout.write(h(e.suite)),o.stdout.write(u)})}var r=n("./base"),i=n("../utils");t=e.exports=s}),e.register("reporters/min.js",function(e,t,n){function i(e){r.call(this,e),e.on("start",function(){o.stdout.write("[2J"),o.stdout.write("[1;3H")}),e.on("end",this.epilogue.bind(this))}function s(){}var r=n("./base");t=e.exports=i,s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i}),e.register("reporters/nyan.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,i=r.window.width*.75|0,s=this.rainbowColors=t.generateColors(),o=this.colorIndex=0,a=this.numberOfLines=4,f=this.trajectories=[[],[],[],[]],l=this.nyanCatWidth=11,c=this.trajectoryWidthMax=i-l,h=this.scoreboardWidth=5,p=this.tick=0,d=0;e.on("start",function(){r.cursor.hide(),t.draw()}),e.on("pending",function(e){t.draw()}),e.on("pass",function(e){t.draw()}),e.on("fail",function(e,n){t.draw()}),e.on("end",function(){r.cursor.show();for(var e=0;e<t.numberOfLines;e++)u("\n");t.epilogue()})}function u(e){o.stdout.write(e)}function a(){}var r=n("./base"),i=r.color;t=e.exports=s,s.prototype.draw=function(){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(),this.tick=!this.tick},s.prototype.drawScoreboard=function(){function n(e,t){u(" "),u("["+e+"m"+t+"[0m"),u("\n")}var e=this.stats,t=r.colors;n(t.green,e.passes),n(t.fail,e.failures),n(t.pending,e.pending),u("\n"),this.cursorUp(this.numberOfLines)},s.prototype.appendRainbow=function(){var e=this.tick?"_":"-",t=this.rainbowify(e);for(var n=0;n<this.numberOfLines;n++){var r=this.trajectories[n];r.length>=this.trajectoryWidthMax&&r.shift(),r.push(t)}},s.prototype.drawRainbow=function(){var e=this;this.trajectories.forEach(function(t,n){u("["+e.scoreboardWidth+"C"),u(t.join("")),u("\n")}),this.cursorUp(this.numberOfLines)},s.prototype.drawNyanCat=function(){var e=this,t=this.scoreboardWidth+this.trajectories[0].length,n="["+t+"C",r="";u(n),u("_,------,"),u("\n"),u(n),r=e.tick?"  ":"   ",u("_|"+r+"/\\_/\\ "),u("\n"),u(n),r=e.tick?"_":"__";var i=e.tick?"~":"^",s;u(i+"|"+r+this.face()+" "),u("\n"),u(n),r=e.tick?" ":"  ",u(r+'""  "" '),u("\n"),this.cursorUp(this.numberOfLines)},s.prototype.face=function(){var e=this.stats;return e.failures?"( x .x)":e.pending?"( o .o)":e.passes?"( ^ .^)":"( - .-)"},s.prototype.cursorUp=function(e){u("["+e+"A")},s.prototype.cursorDown=function(e){u("["+e+"B")},s.prototype.generateColors=function(){var e=[];for(var t=0;t<42;t++){var n=Math.floor(Math.PI/3),r=t*(1/6),i=Math.floor(3*Math.sin(r)+3),s=Math.floor(3*Math.sin(r+2*n)+3),o=Math.floor(3*Math.sin(r+4*n)+3);e.push(36*i+6*s+o+16)}return e},s.prototype.rainbowify=function(e){var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+t+"m"+e+"[0m"},a.prototype=r.prototype,s.prototype=new a,s.prototype.constructor=s}),e.register("reporters/progress.js",function(e,t,n){function u(e,t){r.call(this,e);var n=this,t=t||{},u=this.stats,a=r.window.width*.5|0,f=e.total,l=0,c=Math.max;t.open=t.open||"[",t.complete=t.complete||"▬",t.incomplete=t.incomplete||r.symbols.dot,t.close=t.close||"]",t.verbose=!1,e.on("start",function(){console.log(),i.hide()}),e.on("test end",function(){l++;var e=f-l,n=l/f,r=a*n|0,u=a-r;i.CR(),o.stdout.write("[J"),o.stdout.write(s("progress","  "+t.open)),o.stdout.write(Array(r).join(t.complete)),o.stdout.write(Array(u).join(t.incomplete)),o.stdout.write(s("progress",t.close)),t.verbose&&o.stdout.write(s("progress"," "+l+" of "+f))}),e.on("end",function(){i.show(),console.log(),n.epilogue()})}function a(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=u,r.colors.progress=90,a.prototype=r.prototype,u.prototype=new a,u.prototype.constructor=u}),e.register("reporters/spec.js",function(e,t,n){function u(e){function f(){return Array(u).join("  ")}r.call(this,e);var t=this,n=this.stats,u=0,a=0;e.on("start",function(){console.log()}),e.on("suite",function(e){++u,console.log(s("suite","%s%s"),f(),e.title)}),e.on("suite end",function(e){--u,1==u&&console.log()}),e.on("test",function(e){o.stdout.write(f()+s("pass","  ◦ "+e.title+": "))}),e.on("pending",function(e){var t=f()+s("pending","  - %s");console.log(t,e.title)}),e.on("pass",function(e){if("fast"==e.speed){var t=f()+s("checkmark","  "+r.symbols.ok)+s("pass"," %s ");i.CR(),console.log(t,e.title)}else{var t=f()+s("checkmark","  "+r.symbols.ok)+s("pass"," %s ")+s(e.speed,"(%dms)");i.CR(),console.log(t,e.title,e.duration)}}),e.on("fail",function(e,t){i.CR(),console.log(f()+s("fail","  %d) %s"),++a,e.title)}),e.on("end",t.epilogue.bind(t))}function a(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=u,a.prototype=r.prototype,u.prototype=new a,u.prototype.constructor=u}),e.register("reporters/tap.js",function(e,t,n){function o(e){r.call(this,e);var t=this,n=this.stats,i=1,s=0,o=0;e.on("start",function(){var t=e.grepTotal(e.suite);console.log("%d..%d",1,t)}),e.on("test end",function(){++i}),e.on("pending",function(e){console.log("ok %d %s # SKIP -",i,u(e))}),e.on("pass",function(e){s++,console.log("ok %d %s",i,u(e))}),e.on("fail",function(e,t){o++,console.log("not ok %d %s",i,u(e)),t.stack&&console.log(t.stack.replace(/^/gm,"  "))}),e.on("end",function(){console.log("# tests "+(s+o)),console.log("# pass "+s),console.log("# fail "+o)})}function u(e){return e.fullTitle().replace(/#/g,"")}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o}),e.register("reporters/xunit.js",function(e,t,n){function c(e){r.call(this,e);var t=this.stats,n=[],i=this;e.on("pass",function(e){n.push(e)}),e.on("fail",function(e){n.push(e)}),e.on("end",function(){console.log(d("testsuite",{name:"Mocha Tests",tests:t.tests,failures:t.failures,errors:t.failures,skipped:t.tests-t.failures-t.passes,timestamp:(new o).toUTCString(),time:t.duration/1e3||0},!1)),n.forEach(p),console.log("</testsuite>")})}function h(){}function p(e){var t={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3};if("failed"==e.state){var n=e.err;t.message=s(n.message),console.log(d("testcase",t,!1,d("failure",t,!1,v(n.stack))))}else e.pending?console.log(d("testcase",t,!1,d("skipped",{},!0))):console.log(d("testcase",t,!0))}function d(e,t,n,r){var i=n?"/>":">",o=[],u;for(var a in t)o.push(a+'="'+s(t[a])+'"');return u="<"+e+(o.length?" "+o.join(" "):"")+i,r&&(u+=r+"</"+e+i),u}function v(e){return"<![CDATA["+s(e)+"]]>"}var r=n("./base"),i=n("../utils"),s=i.escape,o=global.Date,u=global.setTimeout,a=global.setInterval,f=global.clearTimeout,l=global.clearInterval;t=e.exports=c,h.prototype=r.prototype,c.prototype=new h,c.prototype.constructor=c}),e.register("runnable.js",function(e,t,n){function h(e,t){this.title=e,this.fn=t,this.async=t&&t.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this.timedOut=!1}function p(){}var r=n("browser/events").EventEmitter,i=n("browser/debug")("mocha:runnable"),s=n("./ms"),o=global.Date,u=global.setTimeout,a=global.setInterval,f=global.clearTimeout,l=global.clearInterval,c=Object.prototype.toString;e.exports=h,p.prototype=r.prototype,h.prototype=new p,h.prototype.constructor=h,h.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("string"==typeof e&&(e=s(e)),i("timeout %d",e),this._timeout=e,this.timer&&this.resetTimeout(),this)},h.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=s(e)),i("timeout %d",e),this._slow=e,this)},h.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},h.prototype.clearTimeout=function(){f(this.timer)},h.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_"==e[0])return;return"parent"==e?"#<Suite>":"ctx"==e?"#<Context>":t},2)},h.prototype.resetTimeout=function(){var e=this,t=this.timeout()||1e9;this.clearTimeout(),this.timer=u(function(){e.callback(new Error("timeout of "+t+"ms exceeded")),e.timedOut=!0},t)},h.prototype.run=function(e){function f(e){if(a)return;a=!0,t.emit("error",e||new Error("done() called multiple times"))}function l(n){if(t.timedOut)return;if(s)return f(n);t.clearTimeout(),t.duration=new o-r,s=!0,e(n)}var t=this,n=this.timeout(),r=new o,i=this.ctx,s,a;i&&i.runnable(this),this.async&&n&&(this.timer=u(function(){l(new Error("timeout of "+n+"ms exceeded")),t.timedOut=!0},n)),this.callback=l;if(this.async){try{this.fn.call(i,function(e){if(e instanceof Error||c.call(e)==="[object Error]")return l(e);if(null!=e)return l(new Error("done() invoked with non-Error: "+e));l()})}catch(h){l(h)}return}if(this.asyncOnly)return l(new Error("--async-only option in use without declaring `done()`"));try{this.pending||this.fn.call(i),this.duration=new o-r,e()}catch(h){e(h)}}}),e.register("runner.js",function(e,t,n){function c(e){var t=this;this._globals=[],this.suite=e,this.total=e.total(),this.failures=0,this.on("test end",function(e){t.checkGlobals(e)}),this.on("hook end",function(e){t.checkGlobals(e)}),this.grep(/.*/),this.globals(this.globalProps().concat(["errno"]))}function h(){}function p(e,t){return a(t,function(t){if(/^d+/.test(t))return!1;if(global.navigator&&/^getInterface/.test(t))return!1;if(global.navigator&&/^\d+/.test(t))return!1;if(/^mocha-/.test(t))return!1;var n=a(e,function(e){return~e.indexOf("*")?0==t.indexOf(e.split("*")[0]):t==e});return n.length==0&&(!global.navigator||"onerror"!==t)})}var r=n("browser/events").EventEmitter,i=n("browser/debug")("mocha:runner"),s=n("./test"),u=n("./utils"),a=u.filter,f=u.keys,l=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date"];e.exports=c,c.immediately=global.setImmediate||o.nextTick,h.prototype=r.prototype,c.prototype=new h,c.prototype.constructor=c,c.prototype.grep=function(e,t){return i("grep %s",e),this._grep=e,this._invert=t,this.total=this.grepTotal(this.suite),this},c.prototype.grepTotal=function(e){var t=this,n=0;return e.eachTest(function(e){var r=t._grep.test(e.fullTitle());t._invert&&(r=!r),r&&n++}),n},c.prototype.globalProps=function(){var e=u.keys(global);for(var t=0;t<l.length;++t){if(~u.indexOf(e,l[t]))continue;e.push(l[t])}return e},c.prototype.globals=function(e){return 0==arguments.length?this._globals:(i("globals %j",e),u.forEach(e,function(e){this._globals.push(e)},this),this)},c.prototype.checkGlobals=function(e){if(this.ignoreLeaks)return;var t=this._globals,n=this.globalProps(),r=o.kill,i;if(r&&1==t.length-n.length)return;if(2==t.length-n.length)return;if(this.prevGlobalsLength==n.length)return;this.prevGlobalsLength=n.length,i=p(t,n),this._globals=this._globals.concat(i),i.length>1?this.fail(e,new Error("global leaks detected: "+i.join(", ")+"")):i.length&&this.fail(e,new Error("global leak detected: "+i[0]))},c.prototype.fail=function(e,t){++this.failures,e.state="failed","string"==typeof t&&(t=new Error('the string "'+t+'" was thrown, throw an Error :)')),this.emit("fail",e,t)},c.prototype.failHook=function(e,t){this.fail(e,t),this.emit("end")},c.prototype.hook=function(e,t){function o(e){var s=r[e];if(!s)return t();if(i.failures&&n.bail())return t();i.currentRunnable=s,s.ctx.currentTest=i.test,i.emit("hook",s),s.on("error",function(e){i.failHook(s,e)}),s.run(function(t){s.removeAllListeners("error");var n=s.error();n&&i.fail(i.test,n);if(t)return i.failHook(s,t);i.emit("hook end",s),delete s.ctx.currentTest,o(++e)})}var n=this.suite,r=n["_"+e],i=this,s;c.immediately(function(){o(0)})},c.prototype.hooks=function(e,t,n){function s(o){r.suite=o;if(!o)return r.suite=i,n();r.hook(e,function(e){if(e)return r.suite=i,n(e);s(t.pop())})}var r=this,i=this.suite;s(t.pop())},c.prototype.hookUp=function(e,t){var n=[this.suite].concat(this.parents()).reverse();this.hooks(e,n,t)},c.prototype.hookDown=function(e,t){var n=[this.suite].concat(this.parents());this.hooks(e,n,t)},c.prototype.parents=function(){var e=this.suite,t=[];while(e=e.parent)t.push(e);return t},c.prototype.runTest=function(e){var t=this.test,n=this;this.asyncOnly&&(t.asyncOnly=!0);try{t.on("error",function(e){n.fail(t,e)}),t.run(e)}catch(r){e(r)}},c.prototype.runTests=function(e,t){function s(o){if(n.failures&&e._bail)return t();i=r.shift();if(!i)return t();var u=n._grep.test(i.fullTitle());n._invert&&(u=!u);if(!u)return s();if(i.pending)return n.emit("pending",i),n.emit("test end",i),s();n.emit("test",n.test=i),n.hookDown("beforeEach",function(){n.currentRunnable=n.test,n.runTest(function(e){i=n.test;if(e)return n.fail(i,e),n.emit("test end",i),n.hookUp("afterEach",s);i.state="passed",n.emit("pass",i),n.emit("test end",i),n.hookUp("afterEach",s)})})}var n=this,r=e.tests.slice(),i;this.next=s,s()},c.prototype.runSuite=function(e,t){function o(){var t=e.suites[s++];if(!t)return u();r.runSuite(t,o)}function u(){r.suite=e,r.hook("afterAll",function(){r.emit("suite end",e),t()})}var n=this.grepTotal(e),r=this,s=0;i("run suite %s",e.fullTitle());if(!n)return t();this.emit("suite",this.suite=e),this.hook("beforeAll",function(){r.runTests(e,o)})},c.prototype.uncaught=function(e){i("uncaught exception %s",e.message);var t=this.currentRunnable;if(!t||"failed"==t.state)return;t.clearTimeout(),e.uncaught=!0,this.fail(t,e);if("test"==t.type){this.emit("test end",t),this.hookUp("afterEach",this.next);return}this.emit("end")},c.prototype.run=function(e){function n(e){t.uncaught(e)}var t=this,e=e||function(){};return i("start"),this.on("end",function(){i("end"),o.removeListener("uncaughtException",n),e(t.failures)}),this.emit("start"),this.runSuite(this.suite,function(){i("finished running"),t.emit("end")}),o.on("uncaughtException",n),this}}),e.register("suite.js",function(e,t,n){function a(e,t){this.title=e,this.ctx=t,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!e,this._timeout=2e3,this._slow=75,this._bail=!1}function f(){}var r=n("browser/events").EventEmitter,i=n("browser/debug")("mocha:suite"),s=n("./ms"),o=n("./utils"),u=n("./hook");t=e.exports=a,t.create=function(e,t){var n=new a(t,e.ctx);return n.parent=e,e.pending&&(n.pending=!0),t=n.fullTitle(),e.addSuite(n),n},f.prototype=r.prototype,a.prototype=new f,a.prototype.constructor=a,a.prototype.clone=function(){var e=new a(this.title);return i("clone"),e.ctx=this.ctx,e.timeout(this.timeout()),e.slow(this.slow()),e.bail(this.bail()),e},a.prototype.timeout=function(e){return 0==arguments.length?this._timeout:("string"==typeof e&&(e=s(e)),i("timeout %d",e),this._timeout=parseInt(e,10),this)},a.prototype.slow=function(e){return 0===arguments.length?this._slow:("string"==typeof e&&(e=s(e)),i("slow %d",e),this._slow=e,this)},a.prototype.bail=function(e){return 0==arguments.length?this._bail:(i("bail %s",e),this._bail=e,this)},a.prototype.beforeAll=function(e){if(this.pending)return this;var t=new u('"before all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._beforeAll.push(t),this.emit("beforeAll",t),this},a.prototype.afterAll=function(e){if(this.pending)return this;var t=new u('"after all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._afterAll.push(t),this.emit("afterAll",t),this},a.prototype.beforeEach=function(e){if(this.pending)return this;var t=new u('"before each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._beforeEach.push(t),this.emit("beforeEach",t),this},a.prototype.afterEach=function(e){if(this.pending)return this;var t=new u('"after each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this._afterEach.push(t),this.emit("afterEach",t),this},a.prototype.addSuite=function(e){return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.bail(this.bail()),this.suites.push(e),this.emit("suite",e),this},a.prototype.addTest=function(e){return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this.tests.push(e),this.emit("test",e),this},a.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title},a.prototype.total=function(){return o.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length},a.prototype.eachTest=function(e){return o.forEach(this.tests,e),o.forEach(this.suites,function(t){t.eachTest(e)}),this}}),e.register("test.js",function(e,t,n){function i(e,t){r.call(this,e,t),this.pending=!t,this.type="test"}function s(){}var r=n("./runnable");e.exports=i,s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i}),e.register("utils.js",function(e,t,n){function a(e){return!~u.indexOf(e)}function f(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var r=n("browser/fs"),i=n("browser/path"),s=i.join,o=n("browser/debug")("mocha:watch"),u=["node_modules",".git"];t.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r)},t.indexOf=function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},t.reduce=function(e,t,n){var r=n;for(var i=0,s=e.length;i<s;i++)r=t(r,e[i],i,e);return r},t.filter=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];t(s,r,e)&&n.push(s)}return n},t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},t.watch=function(e,t){var n={interval:100};e.forEach(function(e){o("file %s",e),r.watchFile(e,n,function(n,r){r.mtime<n.mtime&&t(e)})})},t.files=function(e,n){return n=n||[],r.readdirSync(e).filter(a).forEach(function(i){i=s(e,i),r.statSync(i).isDirectory()?t.files(i,n):i.match(/\.(js|coffee|litcoffee|coffee.md)$/)&&n.push(i)}),n},t.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},t.clean=function(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var n=e.match(/^\n?(\s*)/)[1],r=new RegExp("^"+n,"gm");return e=e.replace(r,""),t.trim(e)},t.escapeRegexp=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},t.parseQuery=function(e){return t.reduce(e.replace("?","").split("&"),function(e,t){var n=t.indexOf("="),r=t.slice(0,n),i=t.slice(++n);return e[r]=decodeURIComponent(i),e},{})},t.highlightTags=function(e){var t=document.getElementsByTagName(e);for(var n=0,r=t.length;n<r;++n)t[n].innerHTML=f(t[n].innerHTML)}}),global=function(){return this}();var t=global.Date,n=global.setTimeout,r=global.setInterval,i=global.clearTimeout,s=global.clearInterval,o={};o.exit=function(e){},o.stdout={},o.removeListener=function(e){"uncaughtException"==e&&(global.onerror=function(){})},o.on=function(e,t){"uncaughtException"==e&&(global.onerror=function(e,n,r){t(new Error(e+" ("+n+":"+r+")"))})};var u=global.Mocha=e("mocha"),a=global.mocha=new u({reporter:"html"}),f=[],l;u.Runner.immediately=function(e){f.push(e),l||(l=n(c,0))},a.ui=function(e){return u.prototype.ui.call(this,e),this.suite.emit("pre-require",global,null,this),this},a.setup=function(e){"string"==typeof e&&(e={ui:e});for(var t in e)this[t](e[t]);return this},a.run=function(e){var t=a.options;a.globals("location");var n=u.utils.parseQuery(global.location.search||"");return n.grep&&a.grep(n.grep),n.invert&&a.invert(),u.prototype.run.call(a,function(){global.document&&u.utils.highlightTags("code"),e&&e()})},u.process=o}(),define("mocha",function(e){return function(){var t,n;return t||e.global.mocha}}(this)),define("thehelp-test",["src/both/core","src/both/general_test_helper","src/both/winston_test_helper","src/client/mocha_reporter","sinon","mocha","chai"],function(e,t,n,r,i,s,o){return{core:e,GeneralTestHelper:t,WinstonTestHelper:n,mochaReporter:r,sinon:i,mocha:s,chai:o}});